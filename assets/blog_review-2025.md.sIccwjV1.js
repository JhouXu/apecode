import{m as t,l as n,c as l,b as e,g as i,k as h,ak as p,j as k}from"./chunks/framework.4q6cU_MS.js";const F=JSON.parse('{"title":"Review 2025","description":"","frontmatter":{},"headers":[],"relativePath":"blog/review-2025.md","filePath":"blog/review-2025.md","lastUpdated":1752739363000}'),d={name:"blog/review-2025.md"};function r(E,s,o,g,c,y){const a=n("PageInfo");return e(),l("div",null,[s[0]||(s[0]=i("h1",{id:"review-2025",tabindex:"-1"},[k("Review 2025 "),i("a",{class:"header-anchor",href:"#review-2025","aria-label":'Permalink to "Review 2025"'},"â€‹")],-1)),h(a,{readingTime:"36",wordCount:"11.1k",publicTime:"2025-05-09"}),s[1]||(s[1]=p(`<h2 id="é˜¶æ®µä¸€" tabindex="-1">é˜¶æ®µä¸€ <a class="header-anchor" href="#é˜¶æ®µä¸€" aria-label="Permalink to &quot;é˜¶æ®µä¸€&quot;">â€‹</a></h2><h3 id="äº‹ä»¶å¾ªç¯" tabindex="-1">äº‹ä»¶å¾ªç¯ï¼Ÿ <a class="header-anchor" href="#äº‹ä»¶å¾ªç¯" aria-label="Permalink to &quot;äº‹ä»¶å¾ªç¯ï¼Ÿ&quot;">â€‹</a></h3><p><a href="/apecode/essays/javascript_duyi.html#ä¸€ã€åŸç†-äº‹ä»¶å¾ªç¯">ğŸ‘‰ æ¸¡ä¸€å¤§å¸ˆè¯¾ - åŸç†äº‹ä»¶å¾ªç¯</a></p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(error);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><details class="details custom-block"><summary>è¿è¡Œç»“æœ</summary><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span></span></code></pre></div></details><h2 id="é˜¶æ®µäºŒ" tabindex="-1">é˜¶æ®µäºŒ <a class="header-anchor" href="#é˜¶æ®µäºŒ" aria-label="Permalink to &quot;é˜¶æ®µäºŒ&quot;">â€‹</a></h2><h3 id="äº‹ä»¶å¾ªç¯-1" tabindex="-1">äº‹ä»¶å¾ªç¯ï¼Ÿ <a class="header-anchor" href="#äº‹ä»¶å¾ªç¯-1" aria-label="Permalink to &quot;äº‹ä»¶å¾ªç¯ï¼Ÿ&quot;">â€‹</a></h3><p><a href="#äº‹ä»¶å¾ªç¯">ğŸ‘‰ é˜¶æ®µä¸€ - äº‹ä»¶å¾ªç¯ï¼Ÿ</a></p><h3 id="uni-app-é¡µé¢è·³è½¬æ–¹å¼" tabindex="-1">uni-app é¡µé¢è·³è½¬æ–¹å¼ï¼Ÿ <a class="header-anchor" href="#uni-app-é¡µé¢è·³è½¬æ–¹å¼" aria-label="Permalink to &quot;uni-app é¡µé¢è·³è½¬æ–¹å¼ï¼Ÿ&quot;">â€‹</a></h3><ul><li>uni.navigateTo(options)ï¼Œä¿ç•™å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé tabBar é¡µé¢ï¼Œå¯ä»¥è¿”å›åŸé¡µé¢ã€‚</li><li>uni.redirectTo(options)ï¼Œå…³é—­å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé tabBar é¡µé¢ï¼Œä¸èƒ½è¿”å›åŸé¡µé¢ã€‚</li><li>uni.switchTab(options)ï¼Œè·³è½¬åˆ° tabBar é¡µé¢ï¼Œå¹¶å…³é—­å…¶ä»–æ‰€æœ‰é tabBar é¡µé¢ï¼Œ<code>ä¸èƒ½æºå¸¦å‚æ•°ï¼ˆå‚æ•°éœ€ç”¨å…¨å±€å˜é‡æˆ– storage å®ç°ï¼‰</code>ã€‚</li><li>uni.reLaunch(options)ï¼Œå…³é—­æ‰€æœ‰é¡µé¢ï¼Œæ‰“å¼€åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢ï¼Œæ¸…ç©ºé¡µé¢æ ˆã€‚</li><li>uni.navigateBack(options)ï¼Œå…³é—­å½“å‰é¡µé¢ï¼Œè¿”å›ä¸Šä¸€é¡µé¢æˆ–å¤šçº§é¡µé¢ã€‚</li></ul><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">uni.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">navigateTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/pages/detail/detail?id=123&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">uni.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redirectTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/pages/detail/detail?id=456&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">uni.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">switchTab</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/pages/home/home&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">uni.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reLaunch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/pages/login/login&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">uni.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">navigateBack</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  delta: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¿”å›ä¸Šä¸€é¡µ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="uni-app-çš„é¡µé¢ä¼ å‚æ–¹å¼" tabindex="-1">uni-app çš„é¡µé¢ä¼ å‚æ–¹å¼ï¼Ÿ <a class="header-anchor" href="#uni-app-çš„é¡µé¢ä¼ å‚æ–¹å¼" aria-label="Permalink to &quot;uni-app çš„é¡µé¢ä¼ å‚æ–¹å¼ï¼Ÿ&quot;">â€‹</a></h3><ol><li>URL å‚æ•°ä¼ å‚ï¼ˆæœ€å¸¸ç”¨ï¼‰</li></ol><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¼ å‚æ–¹å¼ï¼ˆé¡µé¢è·³è½¬æ—¶å¸¦å‚æ•°ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">uni.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">navigateTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/pages/detail/detail?id=123&amp;name=Tom&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ¥æ”¶å‚æ•°æ–¹å¼ï¼ˆåœ¨ç›®æ ‡é¡µ onLoad ç”Ÿå‘½å‘¨æœŸä¸­ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onLoad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(options) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(options.id);   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¾“å‡º: 123</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(options.name); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¾“å‡º: Tom</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ol start="2"><li>ä½¿ç”¨ eventChannel ä¼ å‚ï¼ˆé€‚åˆå¯¹è±¡æˆ–å¤æ‚æ•°æ®ï¼‰</li></ol><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¼ å‚æ–¹å¼ï¼ˆä»… navigateTo æ”¯æŒï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">uni.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">navigateTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/pages/detail/detail&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    res.eventChannel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;acceptDataFromOpenerPage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">456</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      user: { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Alice&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, age: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">25</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ¥æ”¶æ–¹å¼ï¼ˆåœ¨ç›®æ ‡é¡µ onLoad ä¸­ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onLoad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> eventChannel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getOpenerEventChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  eventChannel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;acceptDataFromOpenerPage&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data.id);       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 456</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data.user.name); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Alice</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ol start="3"><li>ä½¿ç”¨ uni.setStorage / uni.setStorageSync ä¼ å‚</li></ol><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è®¾ç½®å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">uni.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setStorageSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userInfo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Jack&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, age: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è·å–å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> uni.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getStorageSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userInfo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user.name); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Jack</span></span></code></pre></div><ol start="4"><li>ä½¿ç”¨å…¨å±€å˜é‡ï¼ˆä¸æ¨èï¼Œå®¹æ˜“æ±¡æŸ“å‘½åç©ºé—´ï¼‰</li></ol><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åœ¨ main.js ä¸­å®šä¹‰å…¨å±€å˜é‡</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.globalData </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  userId: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">789</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åœ¨é¡µé¢ä¸­è®¿é—®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.globalData.userId); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 789</span></span></code></pre></div><h3 id="uni-app-çš„çˆ¶å­ç»„ä»¶ä¼ å‚" tabindex="-1">uni-app çš„çˆ¶å­ç»„ä»¶ä¼ å‚ï¼Ÿ <a class="header-anchor" href="#uni-app-çš„çˆ¶å­ç»„ä»¶ä¼ å‚" aria-label="Permalink to &quot;uni-app çš„çˆ¶å­ç»„ä»¶ä¼ å‚ï¼Ÿ&quot;">â€‹</a></h3><ol><li>çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å‚ï¼ˆé€šè¿‡ propsï¼‰</li></ol><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨å­ç»„ä»¶ï¼Œä¼ å…¥å‚æ•° --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">my-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">parentTitle</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">userInfo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      parentTitle: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ¬¢è¿æ¥åˆ°UniApp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      userInfo: { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Tom&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, age: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- å­ç»„ä»¶é€šè¿‡ props æ¥æ”¶ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  props: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    title: String,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    user: Object,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mounted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.title); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ¬¢è¿æ¥åˆ°UniApp</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.user.name); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Tom</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><ol start="2"><li>å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼ï¼ˆé€šè¿‡ $emitï¼‰</li></ol><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- å­ç»„ä»¶ä¸­è§¦å‘äº‹ä»¶ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">click</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sendMsg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;ç‚¹å‡»æˆ‘&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  methods: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    sendMsg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;childEvent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æˆ‘æ˜¯å­ç»„ä»¶ä¼ æ¥çš„æ¶ˆæ¯&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- çˆ¶ç»„ä»¶ä¸­ç›‘å¬äº‹ä»¶ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">my-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">childEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getMsgFromChild</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  methods: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    getMsgFromChild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">msg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æˆ‘æ˜¯å­ç»„ä»¶ä¼ æ¥çš„æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><ol start="3"><li>çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶æ–¹æ³•ï¼ˆé€šè¿‡ refï¼‰</li></ol><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- å­ç»„ä»¶å®šä¹‰æ–¹æ³• --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  methods: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    sayHello</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å­ç»„ä»¶çš„æ–¹æ³•è¢«è°ƒç”¨äº†&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- çˆ¶ç»„ä»¶ä¸­é€šè¿‡ ref è°ƒç”¨ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">my-child</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;childRef&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.$refs.childRef.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sayHello</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p><code>æ³¨æ„ï¼šåœ¨ &lt;script setup&gt; è¯­æ³•ä¸­éœ€è¦ä½¿ç”¨ ref=&quot;xxx&quot; + onMounted() æ–¹å¼é…åˆ defineExposeã€‚</code></p><ol start="4"><li>ä½¿ç”¨ Vuex / Pinia / å…¨å±€ EventBusï¼ˆé€‚åˆè·¨å±‚çº§é€šä¿¡ï¼‰</li></ol><ul><li>å¦‚æœæ•°æ®è¦åœ¨å¤šä¸ªä¸ç›¸å…³ç»„ä»¶é—´å…±äº«ï¼Œå»ºè®®ä½¿ç”¨ Vuex æˆ– Piniaã€‚</li><li>æˆ–è€…ç®€å•åœºæ™¯å¯ç”¨ä¸€ä¸ª EventBus æ¥ç›‘å¬/å‘é€äº‹ä»¶ã€‚</li></ul><h3 id="uni-app-çš„ç”Ÿå‘½å‘¨æœŸ" tabindex="-1">uni-app çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ <a class="header-anchor" href="#uni-app-çš„ç”Ÿå‘½å‘¨æœŸ" aria-label="Permalink to &quot;uni-app çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ&quot;">â€‹</a></h3><p>åœ¨ UniApp ä¸­ï¼Œç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºä¸‰ç±»ï¼š</p><ul><li>åº”ç”¨çº§ç”Ÿå‘½å‘¨æœŸï¼ˆAppï¼‰</li><li>é¡µé¢çº§ç”Ÿå‘½å‘¨æœŸï¼ˆPageï¼‰</li><li>ç»„ä»¶çº§ç”Ÿå‘½å‘¨æœŸï¼ˆComponentï¼‰</li></ul><h4 id="åº”ç”¨ç”Ÿå‘½å‘¨æœŸ" tabindex="-1">åº”ç”¨ç”Ÿå‘½å‘¨æœŸ <a class="header-anchor" href="#åº”ç”¨ç”Ÿå‘½å‘¨æœŸ" aria-label="Permalink to &quot;åº”ç”¨ç”Ÿå‘½å‘¨æœŸ&quot;">â€‹</a></h4><p>ç®¡ç†æ•´ä¸ª App çš„å¯åŠ¨ã€é€€å‡ºã€åå°ã€å‰å°ç­‰çŠ¶æ€ã€‚</p><p>åº”ç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°åœ¨ App.vue ä¸­å®šä¹‰ï¼Œæ˜¯æ•´ä¸ªåº”ç”¨çš„å…¥å£æ–‡ä»¶ã€‚</p><table tabindex="0"><thead><tr><th>ç”Ÿå‘½å‘¨æœŸå‡½æ•°</th><th>è§¦å‘æ—¶æœº</th><th>æ”¯æŒå¹³å°</th></tr></thead><tbody><tr><td><code>onLaunch(options)</code></td><td>åº”ç”¨åˆå§‹åŒ–å®Œæˆæ—¶è§¦å‘ï¼ˆåªè§¦å‘ä¸€æ¬¡ï¼‰</td><td>å…¨å¹³å°</td></tr><tr><td><code>onShow(options)</code></td><td>åº”ç”¨è¿›å…¥å‰å°æ—¶è§¦å‘</td><td>å…¨å¹³å°</td></tr><tr><td><code>onHide()</code></td><td>åº”ç”¨è¿›å…¥åå°æ—¶è§¦å‘</td><td>å…¨å¹³å°</td></tr><tr><td><code>onUnhandledRejection</code></td><td>æ•è·æœªå¤„ç†çš„ Promise å¼‚å¸¸</td><td>H5ã€å¾®ä¿¡å°ç¨‹åºã€App</td></tr><tr><td><code>onThemeChange</code></td><td>ç³»ç»Ÿä¸»é¢˜å˜åŒ–æ—¶è§¦å‘</td><td>å¾®ä¿¡å°ç¨‹åº</td></tr></tbody></table><table tabindex="0"><thead><tr><th>åœºæ™¯</th><th>ç”Ÿå‘½å‘¨æœŸ</th><th>ç”¨æ³•</th></tr></thead><tbody><tr><td>ç”¨æˆ·æ‰“å¼€ Appï¼Œæ£€æŸ¥ç™»å½•çŠ¶æ€</td><td><code>onLaunch</code></td><td>åˆå§‹åŒ–ã€è¯»å–ç¼“å­˜ tokenã€è·³è½¬ç™»å½•é¡µ</td></tr><tr><td>App ä»åå°è¿”å›å‰å°</td><td><code>onShow</code></td><td>æ£€æŸ¥æ˜¯å¦æœ‰æ–°æ¶ˆæ¯ã€åˆ·æ–°æ•°æ®ç­‰</td></tr><tr><td>App è¢«æŒ‚èµ·</td><td><code>onHide</code></td><td>æš‚å­˜æ•°æ®ã€æ¸…ç†ç›‘å¬å™¨</td></tr><tr><td>ç»Ÿä¸€å¤„ç†æœª catch çš„é”™è¯¯</td><td><code>onUnhandledRejection</code></td><td>é”™è¯¯ä¸ŠæŠ¥ç­‰</td></tr></tbody></table><h4 id="é¡µé¢ç”Ÿå‘½å‘¨æœŸ" tabindex="-1">é¡µé¢ç”Ÿå‘½å‘¨æœŸ <a class="header-anchor" href="#é¡µé¢ç”Ÿå‘½å‘¨æœŸ" aria-label="Permalink to &quot;é¡µé¢ç”Ÿå‘½å‘¨æœŸ&quot;">â€‹</a></h4><p>é€‚ç”¨äºé¡µé¢ï¼ˆå³ pages.json ä¸­æ³¨å†Œçš„é¡µé¢ï¼‰ã€‚</p><table tabindex="0"><thead><tr><th>ç”Ÿå‘½å‘¨æœŸå‡½æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>onLoad(options)</code></td><td>é¡µé¢åŠ è½½æ—¶è§¦å‘ï¼Œæ¥æ”¶é¡µé¢å‚æ•°ã€‚åˆå§‹åŒ–é€»è¾‘å†™åœ¨è¿™é‡Œã€‚</td></tr><tr><td><code>onShow()</code></td><td>é¡µé¢æ˜¾ç¤ºæ—¶è§¦å‘ï¼Œæ¯æ¬¡è¿”å›é¡µé¢éƒ½ä¼šæ‰§è¡Œã€‚</td></tr><tr><td><code>onReady()</code></td><td>é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆæ—¶è§¦å‘ã€‚åªè§¦å‘ä¸€æ¬¡ã€‚</td></tr><tr><td><code>onHide()</code></td><td>é¡µé¢éšè—æ—¶è§¦å‘ï¼Œå¦‚ <code>navigateTo</code> åˆ°å¦ä¸€ä¸ªé¡µé¢ã€‚</td></tr><tr><td><code>onUnload()</code></td><td>é¡µé¢å¸è½½æ—¶è§¦å‘ï¼Œå¦‚ <code>navigateBack</code> è¿”å›ã€‚</td></tr><tr><td><code>onPullDownRefresh()</code></td><td>ç›‘å¬ä¸‹æ‹‰åˆ·æ–°æ“ä½œï¼ˆéœ€è¦é…ç½®ï¼‰ã€‚</td></tr><tr><td><code>onReachBottom()</code></td><td>é¡µé¢æ»šåŠ¨åˆ°åº•éƒ¨æ—¶è§¦å‘ã€‚</td></tr><tr><td><code>onShareAppMessage()</code></td><td>ç”¨æˆ·ç‚¹å‡»å³ä¸Šè§’åˆ†äº«æŒ‰é’®æ—¶è§¦å‘ï¼ˆä»…å°ç¨‹åºï¼‰ã€‚</td></tr><tr><td><code>onPageScroll(event)</code></td><td>é¡µé¢æ»šåŠ¨æ—¶è§¦å‘ã€‚</td></tr><tr><td><code>onResize()</code></td><td>é¡µé¢å°ºå¯¸å˜åŒ–æ—¶è§¦å‘ï¼ˆä»… H5ï¼‰ã€‚</td></tr><tr><td><code>onTabItemTap(item)</code></td><td>ç‚¹å‡» tabBar ä¸­çš„æŒ‰é’®æ—¶è§¦å‘ï¼ˆä»… tab é¡µé¢ï¼‰ã€‚</td></tr></tbody></table><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  onLoad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é¡µé¢åŠ è½½&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, options);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  onShow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é¡µé¢æ˜¾ç¤º&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  onReady</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é¡µé¢æ¸²æŸ“å®Œæˆ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  onHide</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é¡µé¢éšè—&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  onUnload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é¡µé¢å¸è½½&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h4 id="ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ" tabindex="-1">ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ <a class="header-anchor" href="#ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ" aria-label="Permalink to &quot;ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ&quot;">â€‹</a></h4><p>é€‚ç”¨äºé€šè¿‡ components/ å¼•å…¥çš„å­ç»„ä»¶ã€‚</p><table tabindex="0"><thead><tr><th>ç”Ÿå‘½å‘¨æœŸå‡½æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>beforeCreate()</code></td><td>å®ä¾‹åˆå§‹åŒ–ä¹‹åï¼Œæ•°æ®è§‚æµ‹ä¹‹å‰ã€‚</td></tr><tr><td><code>created()</code></td><td>å®ä¾‹åˆ›å»ºå®Œæˆï¼Œæ•°æ®å·²è®¾ç½®ã€‚</td></tr><tr><td><code>beforeMount()</code></td><td>æ¨¡æ¿ç¼–è¯‘å‰ï¼Œå°šæœªæŒ‚è½½åˆ° DOMã€‚</td></tr><tr><td><code>mounted()</code></td><td>ç»„ä»¶æŒ‚è½½åˆ° DOM åã€‚æœ€å¸¸ç”¨ï¼Œç”¨äºè·å– DOM å…ƒç´ æˆ–å‘é€è¯·æ±‚ã€‚</td></tr><tr><td><code>beforeUpdate()</code></td><td>æ•°æ®æ›´æ–°å‰ã€‚</td></tr><tr><td><code>updated()</code></td><td>æ•°æ®æ›´æ–°åã€‚</td></tr><tr><td><code>beforeDestroy()</code></td><td>å®ä¾‹é”€æ¯å‰ã€‚</td></tr><tr><td><code>destroyed()</code></td><td>å®ä¾‹é”€æ¯åã€‚</td></tr></tbody></table><blockquote><p>åœ¨ vue3 + <code>&lt;script setup&gt;</code> ä¸­ï¼Œæ¨èä½¿ç”¨ Composition API çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼š</p></blockquote><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Vue 3 ç¤ºä¾‹ï¼ˆä½¿ç”¨ Composition APIï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { onMounted, onUnmounted } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onMounted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç»„ä»¶å·²æŒ‚è½½&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onUnmounted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç»„ä»¶å·²å¸è½½&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h4 id="ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº" tabindex="-1">ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº <a class="header-anchor" href="#ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº" aria-label="Permalink to &quot;ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº&quot;">â€‹</a></h4><ol><li>é¡µé¢ï¼šonLoad â†’ onShow â†’ onReady</li><li>ç»„ä»¶ï¼šbeforeCreate â†’ created â†’ beforeMount â†’ mounted</li></ol><h2 id="é˜¶æ®µä¸‰" tabindex="-1">é˜¶æ®µä¸‰ <a class="header-anchor" href="#é˜¶æ®µä¸‰" aria-label="Permalink to &quot;é˜¶æ®µä¸‰&quot;">â€‹</a></h2><h3 id="vue-çš„æ•°æ®ç»‘å®šè¿æ¥æ–¹å¼" tabindex="-1">vue çš„æ•°æ®ç»‘å®šè¿æ¥æ–¹å¼ï¼Ÿ <a class="header-anchor" href="#vue-çš„æ•°æ®ç»‘å®šè¿æ¥æ–¹å¼" aria-label="Permalink to &quot;vue çš„æ•°æ®ç»‘å®šè¿æ¥æ–¹å¼ï¼Ÿ&quot;">â€‹</a></h3><p>Vue çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€æ˜¯<code>åŒå‘æ•°æ®ç»‘å®š</code>ï¼Œå…¶æœ¬è´¨æ˜¯æ„å»ºä¸€ä¸ª<code>å“åº”å¼ç³»ç»Ÿ</code>ï¼Œè‡ªåŠ¨è¿½è¸ªæ•°æ®å˜åŒ–å¹¶æ›´æ–°è§†å›¾ã€‚</p><p>Vue 2 å’Œ Vue 3 å®ç°å“åº”å¼çš„æ–¹å¼ä¸åŒï¼š</p><ul><li>Vue 2 ä½¿ç”¨ <code>Object.defineProperty</code> å¯¹å±æ€§è¿›è¡ŒåŠ«æŒã€‚</li><li>Vue 3 ä½¿ç”¨ <code>Proxy</code> å®ç°æ›´å…¨é¢çš„ä»£ç†å’Œæ€§èƒ½ä¼˜åŒ–ã€‚</li></ul><h4 id="å“åº”å¼ç³»ç»ŸåŸç†" tabindex="-1">å“åº”å¼ç³»ç»ŸåŸç† <a class="header-anchor" href="#å“åº”å¼ç³»ç»ŸåŸç†" aria-label="Permalink to &quot;å“åº”å¼ç³»ç»ŸåŸç†&quot;">â€‹</a></h4><p>Vue 2ï¼šåŸºäº <code>Object.defineProperty</code></p><p>Vue åœ¨åˆå§‹åŒ–æ—¶éå† <code>data</code> ä¸­æ¯ä¸ªå±æ€§ï¼Œå°†å®ƒä»¬è½¬åŒ–ä¸ºå“åº”å¼å¯¹è±¡ã€‚</p><ul><li>è¯»å–æ•°æ®æ—¶ï¼šè§¦å‘ <code>getter</code> â†’ æ”¶é›†ä¾èµ–</li><li>ä¿®æ”¹æ•°æ®æ—¶ï¼šè§¦å‘ <code>setter</code> â†’ é€šçŸ¥è§†å›¾æ›´æ–°</li></ul><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç¤ºä¾‹ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineReactive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">defineProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj, key, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è®¿é—®:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, key); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ”¶é›†ä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> val;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">newVal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä¿®æ”¹:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, key, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä¸º&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, newVal); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é€šçŸ¥æ›´æ–°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> newVal;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // è§¦å‘è§†å›¾æ›´æ–°é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Tom&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">defineReactive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, data.name);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Jerry&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è‡ªåŠ¨è§¦å‘ setter â†’ æ›´æ–°è§†å›¾</span></span></code></pre></div><p>Vue 3 åŸºäº <code>Proxy</code> å¯¹æ•´ä¸ªå¯¹è±¡è¿›è¡Œä¸€æ¬¡æ€§ä»£ç†ï¼Œèƒ½ç›‘å¬æ–°å¢/åˆ é™¤å±æ€§å’Œæ•°ç»„å˜åŒ–ã€‚</p><ul><li>è¯»å–å±æ€§æ—¶ï¼šè§¦å‘ get â†’ æ”¶é›†ä¾èµ–</li><li>è®¾ç½®å±æ€§æ—¶ï¼šè§¦å‘ set â†’ é€šçŸ¥æ›´æ–°</li></ul><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç¤ºä¾‹ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> handler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¯»å–å±æ€§:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, key); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ”¶é›†ä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Reflect.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(target, key);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è®¾ç½®å±æ€§:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, key, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;=&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, value); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é€šçŸ¥æ›´æ–°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Reflect.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(target, key, value);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // è§¦å‘è§†å›¾æ›´æ–°é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> state</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ count: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }, handler);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state.count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è§¦å‘ set â†’ æ›´æ–°è§†å›¾</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">å“åº”å¼æ›´æ–°æµç¨‹</p><p>è¯»å–å±æ€§ â†’ æ”¶é›†ä¾èµ–</p><p>ä¿®æ”¹å±æ€§ â†’ é€šçŸ¥æ›´æ–°</p><hr><p>Vue 2ï¼šObject.defineProperty â†’ Depï¼ˆä¾èµ–ç®¡ç†ï¼‰+ Watcherï¼ˆè§†å›¾æ›´æ–°ï¼‰</p><p>Vue 3ï¼šProxy â†’ track() + trigger()</p></div><div class="tip custom-block"><p class="custom-block-title">å¯¹æ¯”</p><table tabindex="0"><thead><tr><th>ç‰¹æ€§</th><th>Vue 2 (<code>Object.defineProperty</code>)</th><th>Vue 3 (<code>Proxy</code>)</th></tr></thead><tbody><tr><td>å“åº”æ–¹å¼</td><td>éå†æ¯ä¸ªå±æ€§è®¾ç½® getter/setter</td><td>ä¸€æ¬¡æ€§ä»£ç†æ•´ä¸ªå¯¹è±¡</td></tr><tr><td>æ–°å¢/åˆ é™¤å±æ€§</td><td>ä¸ä¼šå“åº”ï¼ˆéœ€ç”¨ <code>Vue.set</code>ï¼‰</td><td>è‡ªåŠ¨å“åº”</td></tr><tr><td>æ•°ç»„æ”¯æŒ</td><td>æœ‰ç¼ºé™·ï¼Œéœ€æ‰‹åŠ¨å¤„ç†éƒ¨åˆ†æ–¹æ³•</td><td>åŸç”Ÿæ”¯æŒæ‰€æœ‰æ•°ç»„æ–¹æ³•</td></tr><tr><td>æ€§èƒ½</td><td>ä¸­ç­‰ï¼Œé€‚åˆä¸­å°é¡¹ç›®</td><td>æ›´å¥½ï¼Œé€‚åˆä¸­å¤§å‹é¡¹ç›®</td></tr></tbody></table></div><h4 id="æ•°æ®è§†å›¾æ›´æ–°æœºåˆ¶" tabindex="-1">æ•°æ®è§†å›¾æ›´æ–°æœºåˆ¶ <a class="header-anchor" href="#æ•°æ®è§†å›¾æ›´æ–°æœºåˆ¶" aria-label="Permalink to &quot;æ•°æ®è§†å›¾æ›´æ–°æœºåˆ¶&quot;">â€‹</a></h4><p>Vue ä½¿ç”¨<code>â€œä¾èµ–æ”¶é›† + å‘å¸ƒ-è®¢é˜…æ¨¡å¼â€</code>æ¥è¿½è¸ªæ•°æ®å’Œè§†å›¾ä¹‹é—´çš„å…³ç³»ï¼š</p><ol><li>è¯»å–æ•°æ®æ—¶ â†’ æ”¶é›†ä¾èµ–</li></ol><p>æ¸²æŸ“ç»„ä»¶æ—¶è®¿é—®æ•°æ®å±æ€§ï¼ŒVue ä¼šè®°å½•å½“å‰ç»„ä»¶å¯¹è¯¥æ•°æ®çš„ä¾èµ–ã€‚</p><ol start="2"><li>å†™å…¥æ•°æ®æ—¶ â†’ é€šçŸ¥æ›´æ–°</li></ol><p>æ•°æ®å˜åŒ–è§¦å‘ setterï¼ˆVue2ï¼‰æˆ– Proxy.setï¼ˆVue3ï¼‰ï¼ŒVue é€šçŸ¥æ‰€æœ‰ä¾èµ–ç»„ä»¶é‡æ–°æ‰§è¡Œæ›´æ–°é€»è¾‘ã€‚</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Vue 2 ç¤ºä¾‹ï¼ˆæ¨¡æ‹Ÿæ›´æ–°æµç¨‹ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Tom&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">defineProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(window, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è§†å›¾ç”¨åˆ°äº† nameï¼Œæ”¶é›†ä¾èµ–&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name æ”¹äº†ï¼Œè¦æ›´æ–°è§†å›¾äº†&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> val;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // é€šçŸ¥è§†å›¾æ›´æ–°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(window.name); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è§¦å‘ getter â†’ æ”¶é›†ä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Jerry&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è§¦å‘ setter â†’ æ›´æ–°è§†å›¾</span></span></code></pre></div><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Vue 3 ç¤ºä¾‹ï¼ˆè‡ªåŠ¨ä¾èµ–è¿½è¸ªï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> state</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> reactive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ count: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">watchEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state.count); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è‡ªåŠ¨æ”¶é›†ä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state.count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¿®æ”¹æ•°æ® â†’ è‡ªåŠ¨æ›´æ–°</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">æ€»ç»“</p><p>Vue èƒ½å®ç°è§†å›¾è‡ªåŠ¨æ›´æ–°ï¼Œæ ¸å¿ƒæœºåˆ¶æ˜¯ï¼š</p><p>è¯»å–å±æ€§æ—¶ â†’ è‡ªåŠ¨è®°å½•ä¾èµ–</p><p>ä¿®æ”¹å±æ€§æ—¶ â†’ è‡ªåŠ¨è§¦å‘æ›´æ–°</p><p>Vue 2 åˆ©ç”¨ getter/setter å®Œæˆä¾èµ–æ”¶é›†ä¸é€šçŸ¥æ›´æ–° Vue 3 å€ŸåŠ© Proxy å’Œå“åº”å¼è¿½è¸ªç³»ç»Ÿï¼ˆå¦‚ track å’Œ triggerï¼‰å®ç°æ›´ä¼˜é›…çš„å“åº”å¼</p></div><h3 id="vue-å’Œ-uni-app-çš„ä¸åŒç‚¹" tabindex="-1">vue å’Œ uni-app çš„ä¸åŒç‚¹ï¼Ÿ <a class="header-anchor" href="#vue-å’Œ-uni-app-çš„ä¸åŒç‚¹" aria-label="Permalink to &quot;vue å’Œ uni-app çš„ä¸åŒç‚¹ï¼Ÿ&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>å¯¹æ¯”é¡¹</th><th>Vue</th><th>UniApp</th></tr></thead><tbody><tr><td>è·¯ç”±é…ç½®</td><td><code>vue-router</code></td><td><code>pages.json</code></td></tr><tr><td>è·¯ç”±è·³è½¬</td><td><code>$router.push</code></td><td><code>uni.navigateTo</code> ç­‰</td></tr><tr><td>ç”Ÿå‘½å‘¨æœŸ</td><td><code>created/mounted</code></td><td><code>onLoad/onShow/onReady</code></td></tr><tr><td>DOM æ“ä½œ</td><td>æ”¯æŒåŸç”Ÿ DOM</td><td>éœ€ä½¿ç”¨ <code>uni.createSelectorQuery()</code></td></tr><tr><td>è¯·æ±‚æ–¹å¼</td><td><code>axios/fetch</code></td><td><code>uni.request</code></td></tr><tr><td>å¹³å°æ”¯æŒæŒ‡ä»¤</td><td>æ— </td><td><code>#ifdef</code> æ¡ä»¶ç¼–è¯‘æ”¯æŒ</td></tr><tr><td>æ¨¡æ¿è¯­æ³•</td><td>å®Œæ•´ Vue æ”¯æŒ</td><td>å­é›†ï¼Œå¹³å°å…¼å®¹ä¼˜å…ˆ</td></tr></tbody></table><details class="details custom-block"><summary>å®ä¾‹</summary><p><strong>1. é¡µé¢ç»“æ„é…ç½®</strong></p><p><code>uni-app</code> å’Œ <code>Vue</code> çš„å†™æ³•è™½ç„¶å¤§ä½“ä¸€è‡´ï¼ˆå› ä¸º UniApp åŸºäº Vue 2/3 å¼€å‘ï¼‰ï¼Œä½† UniApp é’ˆå¯¹ <strong>è·¨ç«¯é€‚é…</strong>ã€<strong>é¡µé¢é…ç½®</strong>ã€<strong>å¹³å°ç‰¹æ€§</strong> åšäº†æ‰©å±•å’Œé™åˆ¶ï¼Œå¯¼è‡´è¯­æ³•ä¸Šå­˜åœ¨ä¸€äº›å·®å¼‚ã€‚</p><table tabindex="0"><thead><tr><th>Vue</th><th>UniApp</th></tr></thead><tbody><tr><td>è·¯ç”±ä½¿ç”¨ <code>vue-router</code>ï¼Œæ‰‹åŠ¨æ³¨å†Œé¡µé¢ç»„ä»¶ã€‚</td><td>æ‰€æœ‰é¡µé¢å¿…é¡»åœ¨ <code>pages.json</code> ä¸­å£°æ˜ï¼Œè‡ªåŠ¨æ³¨å†Œé¡µé¢ã€‚</td></tr></tbody></table><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Vue çš„è·¯ç”±ç»“æ„</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> routes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/home&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, component: Home },</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// uni-app ä¸­çš„ pages.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;pages&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pages/home/index&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;style&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;navigationBarTitleText&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é¦–é¡µ&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>2. è·¯ç”±è·³è½¬æ–¹å¼ä¸åŒ</strong></p><table tabindex="0"><thead><tr><th>Vue</th><th>UniApp</th></tr></thead><tbody><tr><td>ä½¿ç”¨ <code>this.$router.push({ path: &#39;/home&#39; })</code></td><td>ä½¿ç”¨ <code>uni.navigateTo({ url: &#39;/pages/home/index&#39; })</code></td></tr></tbody></table><p><strong>3. ç”Ÿå‘½å‘¨æœŸè¯­æ³•ä¸åŒï¼ˆé¡µé¢çº§ï¼‰</strong></p><table tabindex="0"><thead><tr><th>Vue ç”Ÿå‘½å‘¨æœŸ</th><th>UniApp é¡µé¢ç”Ÿå‘½å‘¨æœŸ</th></tr></thead><tbody><tr><td>created / mounted ç­‰</td><td>onLoad / onShow / onReady / onUnload ç­‰</td></tr></tbody></table><p><strong>4. æ¨¡æ¿è¯­æ³•å·®å¼‚ï¼šå¹³å°å…¼å®¹æ€§è€ƒè™‘</strong></p><p>UniApp çš„æ¨¡æ¿è¯­æ³• <strong>ä¸èƒ½å®Œå…¨ç­‰åŒ Vue è¯­æ³•</strong>ï¼Œä¸»è¦æ˜¯ä¸ºäº†æ”¯æŒå°ç¨‹åºå¹³å°ï¼Œé™åˆ¶äº†ä¸€äº› Vue è¯­æ³•ç‰¹æ€§ï¼š</p><table tabindex="0"><thead><tr><th>ç‰¹æ€§</th><th>Vue</th><th>UniApp</th></tr></thead><tbody><tr><td>åŠ¨æ€ç»„ä»¶</td><td><code>&lt;component :is=&quot;comp&quot; /&gt;</code></td><td>æ”¯æŒæœ‰é™ï¼Œåœ¨éƒ¨åˆ†å¹³å°ä¸å…¼å®¹</td></tr><tr><td>v-html</td><td>æ”¯æŒï¼ˆè¾“å‡º HTMLï¼‰</td><td>H5 æ”¯æŒï¼Œå°ç¨‹åºä¸æ”¯æŒæˆ–éœ€å€ŸåŠ© rich-text</td></tr><tr><td>è‡ªå®šä¹‰äº‹ä»¶ä¿®é¥°ç¬¦ <code>.native</code></td><td>æ”¯æŒ</td><td>å°ç¨‹åºä¸­æ— æ•ˆ</td></tr><tr><td>DOM æ“ä½œ</td><td>åŸç”Ÿ DOM æ”¯æŒ</td><td>æ— æ³•ç›´æ¥è®¿é—® DOMï¼Œåªèƒ½é€šè¿‡ <code>uni.createSelectorQuery()</code></td></tr></tbody></table><p><strong>5. äº‹ä»¶ç»‘å®šä¸è°ƒç”¨æ–¹å¼</strong></p><p>è™½ç„¶è¯­æ³•ç›¸ä¼¼ï¼Œä½† uni-app é’ˆå¯¹å¾®ä¿¡å°ç¨‹åºç­‰å¹³å°å¯¹äº‹ä»¶è¡Œä¸ºæœ‰é¢å¤–é™åˆ¶ï¼š</p><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- Vue --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">click</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">doSomething</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;ç‚¹å‡»&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- UniApp --&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- ä¸€æ ·å†™æ³•ï¼Œä½†åœ¨å°ç¨‹åºä¸­ä¸èƒ½ä½¿ç”¨æŸäº› DOM äº‹ä»¶ä¿®é¥°ç¬¦å¦‚ .stopã€.prevent ç»„åˆä½¿ç”¨ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">click</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">doSomething</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;ç‚¹å‡»&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- å°ç¨‹åºå¯èƒ½æ— æ•ˆ --&gt;</span></span></code></pre></div><p><strong>6. API è¯­æ³•å·®å¼‚</strong></p><p>UniApp ç”¨äº†å¾ˆå¤šè‡ªæœ‰çš„ APIï¼Œä¸åŒäº Vue çš„ä¼ ç»Ÿå†™æ³•ã€‚</p><table tabindex="0"><thead><tr><th>åŠŸèƒ½</th><th>Vue è¯­æ³•</th><th>UniApp è¯­æ³•</th></tr></thead><tbody><tr><td>è¯·æ±‚æ¥å£</td><td><code>axios.get(...)</code></td><td><code>uni.request({...})</code></td></tr><tr><td>ç¼“å­˜</td><td><code>localStorage.setItem(...)</code></td><td><code>uni.setStorageSync(...)</code></td></tr><tr><td>é¡µé¢è·³è½¬</td><td><code>$router.push()</code></td><td><code>uni.navigateTo()</code></td></tr><tr><td>è·å–å…ƒç´ </td><td>åŸç”Ÿ DOM / ref</td><td><code>uni.createSelectorQuery()</code></td></tr></tbody></table><p><strong>7. ç¬¬ä¸‰æ–¹ç»„ä»¶å†™æ³•å·®å¼‚</strong></p><ul><li>Vue å¯ä»¥è‡ªç”±æ³¨å†Œ/å¼•å…¥ç»„ä»¶ï¼Œæ”¯æŒå¼‚æ­¥ç»„ä»¶ç­‰é«˜çº§ç‰¹æ€§ã€‚</li><li>UniApp æ”¯æŒ easycom è‡ªåŠ¨å¼•å…¥ï¼Œä¹Ÿæ”¯æŒå¹³å°å·®å¼‚åŒ–å†™æ³•ï¼ˆå¦‚æ¡ä»¶ç¼–è¯‘ #ifdef APP-PLUSï¼‰</li></ul><p><strong>8. å¹³å°å·®å¼‚æŒ‡ä»¤è¯­æ³•ï¼ˆUniApp ä¸“å±ï¼‰</strong></p><p>UniApp æ”¯æŒè·¨å¹³å°å†™æ³•æ—¶ï¼Œä¼šåŠ å…¥ç‰¹æœ‰è¯­æ³•ï¼š</p><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- ä»…åœ¨å¾®ä¿¡å°ç¨‹åºä¸­æ˜¾ç¤º --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">view</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> v-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">isWx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;å¾®ä¿¡ä¸“å±å†…å®¹&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- æ¡ä»¶ç¼–è¯‘å†™æ³• --&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- #ifdef MP-WEIXIN --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;å¾®ä¿¡å°ç¨‹åºå†…å®¹&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- #endif --&gt;</span></span></code></pre></div></details><h3 id="uni-app-çš„-sessionstorage-å’Œ-localstorage-ç¼“å­˜æœºåˆ¶" tabindex="-1">uni-app çš„ sessionStorage å’Œ localStorage ç¼“å­˜æœºåˆ¶ï¼Ÿ <a class="header-anchor" href="#uni-app-çš„-sessionstorage-å’Œ-localstorage-ç¼“å­˜æœºåˆ¶" aria-label="Permalink to &quot;uni-app çš„ sessionStorage å’Œ localStorage ç¼“å­˜æœºåˆ¶ï¼Ÿ&quot;">â€‹</a></h3><p>ç•¥</p><h3 id="vue-dragger-value-å’Œ-list-çš„åŒºåˆ«" tabindex="-1">vue-dragger value å’Œ list çš„åŒºåˆ«ï¼Ÿ <a class="header-anchor" href="#vue-dragger-value-å’Œ-list-çš„åŒºåˆ«" aria-label="Permalink to &quot;vue-dragger value å’Œ list çš„åŒºåˆ«ï¼Ÿ&quot;">â€‹</a></h3><p>value:</p><blockquote><p>Input array to draggable component. Typically same array as referenced by inner element v-for directive.</p><p>This is the preferred way to use Vue.draggable as it is compatible with Vuex.</p><p>It should not be used directly but only though the v-model directive:</p></blockquote><p>æ‹–æ‹½ç»„ä»¶çš„è¾“å…¥æ•°ç»„ã€‚é€šå¸¸ä¸å†…éƒ¨å…ƒç´  v-for æŒ‡ä»¤å¼•ç”¨çš„æ•°ç»„ç›¸åŒã€‚ è¿™æ˜¯ä½¿ç”¨ Vue.draggable çš„æ¨èæ–¹å¼ï¼Œå› ä¸ºå®ƒä¸ Vuex å…¼å®¹ã€‚ å®ƒä¸åº”ç›´æ¥ä½¿ç”¨ï¼Œè€Œåªèƒ½é€šè¿‡ v-model æŒ‡ä»¤ä½¿ç”¨ï¼š</p><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">draggable</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">myArray</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>list:</p><blockquote><p>Alternative to the value prop, list is an array to be synchronized with drag-and-drop.</p><p>The main difference is that list prop is updated by draggable component using splice method, whereas value is immutable.</p><p>Do not use in conjunction with value prop.</p></blockquote><p>value å±æ€§çš„æ›¿ä»£æ–¹æ¡ˆï¼Œåˆ—è¡¨æ˜¯ä¸€ä¸ªç”¨äºä¸æ‹–æ”¾åŒæ­¥çš„æ•°ç»„ã€‚ ä¸»è¦åŒºåˆ«<code>åœ¨äº list å±æ€§æ˜¯é€šè¿‡å¯æ‹–åŠ¨ç»„ä»¶ä½¿ç”¨ splice æ–¹æ³•æ›´æ–°çš„ï¼Œè€Œ value æ˜¯ä¸å¯å˜çš„</code>ã€‚ ä¸è¦ä¸ value prop åŒæ—¶ä½¿ç”¨ã€‚</p><h2 id="é˜¶æ®µå››-ç•¥" tabindex="-1">é˜¶æ®µå››ï¼ˆç•¥ï¼‰ <a class="header-anchor" href="#é˜¶æ®µå››-ç•¥" aria-label="Permalink to &quot;é˜¶æ®µå››ï¼ˆç•¥ï¼‰&quot;">â€‹</a></h2><h2 id="é˜¶æ®µäº”" tabindex="-1">é˜¶æ®µäº” <a class="header-anchor" href="#é˜¶æ®µäº”" aria-label="Permalink to &quot;é˜¶æ®µäº”&quot;">â€‹</a></h2><h3 id="é—­åŒ…äº§ç”Ÿçš„åŸå› -å¦‚ä½•é¿å…" tabindex="-1">é—­åŒ…äº§ç”Ÿçš„åŸå› ï¼Ÿå¦‚ä½•é¿å…ï¼Ÿ <a class="header-anchor" href="#é—­åŒ…äº§ç”Ÿçš„åŸå› -å¦‚ä½•é¿å…" aria-label="Permalink to &quot;é—­åŒ…äº§ç”Ÿçš„åŸå› ï¼Ÿå¦‚ä½•é¿å…ï¼Ÿ&quot;">â€‹</a></h3><p><strong>é—­åŒ… Closure</strong> æ˜¯æŒ‡å¼•ç”¨äº†å¦å¤–ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„å‡½æ•°ã€‚</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> outer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> inner</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(count);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> counter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> outer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">counter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¾“å‡º 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">counter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¾“å‡º 2</span></span></code></pre></div><p>ä¼šå‡ºç°çš„é—®é¢˜ï¼š</p><ul><li>é—­åŒ…å¯èƒ½å¯¼è‡´ å†…å­˜æ³„æ¼ï¼ˆå˜é‡è¢«æŒä¹…å¼•ç”¨ï¼Œæ— æ³•é‡Šæ”¾ï¼‰ã€‚</li><li>ä½¿ç”¨æ—¶è¦æ³¨æ„é¿å…ä¸å¿…è¦çš„é—­åŒ…ï¼Œå°¤å…¶æ˜¯åœ¨å¾ªç¯æˆ–å¤§å‹é¡¹ç›®ä¸­ã€‚</li></ul><p>é¿å…æ–¹æ³•ï¼š</p><table tabindex="0"><thead><tr><th>å»ºè®®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ä½¿ç”¨ <code>let</code> ä»£æ›¿ <code>var</code></td><td>é¿å…å¾ªç¯ä¸­å˜é‡å¼•ç”¨å¼‚å¸¸</td></tr><tr><td>ä¸æ»¥ç”¨é—­åŒ…</td><td>å°½é‡åªåœ¨éœ€è¦ä¿ç•™çŠ¶æ€æ—¶ä½¿ç”¨é—­åŒ…</td></tr><tr><td>åŠæ—¶é‡Šæ”¾å¼•ç”¨</td><td>ç”¨å®Œé—­åŒ…åè®¾ç½®ä¸º <code>null</code></td></tr><tr><td>æ³¨æ„äº‹ä»¶ç›‘å¬å™¨</td><td>ä½¿ç”¨å§”æ‰˜æˆ–è§£ç»‘é—­åŒ…å¼•ç”¨</td></tr><tr><td>é¿å…å¼•ç”¨å¤§å‹æ•°æ®ç»“æ„</td><td>å‡å°‘å†…å­˜å ç”¨ï¼Œé˜²æ­¢æ³„æ¼</td></tr></tbody></table><h2 id="é˜¶æ®µå…­" tabindex="-1">é˜¶æ®µå…­ <a class="header-anchor" href="#é˜¶æ®µå…­" aria-label="Permalink to &quot;é˜¶æ®µå…­&quot;">â€‹</a></h2><h3 id="å¾®ä¿¡å°ç¨‹åºä¸åŸç”ŸåŒºåˆ«" tabindex="-1">å¾®ä¿¡å°ç¨‹åºä¸åŸç”ŸåŒºåˆ«ï¼Ÿ <a class="header-anchor" href="#å¾®ä¿¡å°ç¨‹åºä¸åŸç”ŸåŒºåˆ«" aria-label="Permalink to &quot;å¾®ä¿¡å°ç¨‹åºä¸åŸç”ŸåŒºåˆ«ï¼Ÿ&quot;">â€‹</a></h3><div class="warning custom-block"><p class="custom-block-title">æ¨¡æ¿</p><ul><li>å¾®ä¿¡å°ç¨‹åºã€H5 å’ŒåŸç”Ÿ App çš„ä¸»è¦åŒºåˆ«åœ¨äºè¿è¡Œç¯å¢ƒå’Œèƒ½åŠ›é™åˆ¶ã€‚</li><li>å¾®ä¿¡å°ç¨‹åºæ˜¯è¿è¡Œåœ¨å¾®ä¿¡å®¢æˆ·ç«¯å†…çš„è½»åº”ç”¨ï¼Œå¼€å‘ä½“éªŒæ¥è¿‘å‰ç«¯ï¼Œå…·å¤‡ä¸€å®šçš„ç³»ç»Ÿèƒ½åŠ›ï¼ˆå¦‚æ‰«ç ã€ä½ç½®ã€æˆæƒç™»å½•ï¼‰ï¼Œæ€§èƒ½å’Œä½“éªŒä¼˜äº H5ï¼Œä½†ä»ä½äºåŸç”Ÿ Appã€‚</li><li>åŸç”Ÿ H5 æ˜¯æœ€è½»é‡çº§çš„æ–¹å¼ï¼Œåªä¾èµ–æµè§ˆå™¨å°±èƒ½è¿è¡Œï¼Œä½†åŠŸèƒ½å—é™ï¼Œä½“éªŒç›¸å¯¹æœ€å·®ï¼Œæ›´å¤šç”¨äºæ´»åŠ¨é¡µã€è½åœ°é¡µã€åˆ†äº«é¡µç­‰åœºæ™¯ã€‚</li><li>åŸç”Ÿ App åˆ™æ‹¥æœ‰æœ€å¼ºå¤§çš„åŠŸèƒ½æƒé™å’Œç”¨æˆ·ä½“éªŒï¼Œé€‚ç”¨äºå¤æ‚ç³»ç»Ÿç±»ã€å¼ºäº¤äº’ç±»æˆ–å¯¹æ€§èƒ½è¦æ±‚é«˜çš„åº”ç”¨ï¼Œæ¯”å¦‚ç›´æ’­ã€ç”µå•†ã€ç¤¾äº¤å¹³å°ç­‰ï¼Œä½†å¼€å‘å’Œç»´æŠ¤æˆæœ¬è¾ƒé«˜ã€‚</li><li>æ‰€ä»¥ä¸‰è€…é€šå¸¸æ˜¯äº’è¡¥å…³ç³»ï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡ç±»å‹ã€ç›®æ ‡ç”¨æˆ·ã€æˆæœ¬é¢„æœŸçµæ´»é€‰å‹ã€‚ä¾‹å¦‚ï¼šä¸»åº”ç”¨ç”¨åŸç”Ÿ Appï¼Œéƒ¨åˆ†æ¨å¹¿é¡µç”¨ H5ï¼Œå¼•æµ/è½¬åŒ–é¡µç”¨å°ç¨‹åºã€‚</li></ul><hr><ul><li>æ¯”å¦‚æˆ‘åœ¨é¡¹ç›®ä¸­åšè¿‡ä¸€ä¸ªåœ¨çº¿å•†åŸç³»ç»Ÿï¼Œæ ¸å¿ƒåŠŸèƒ½ç”±åŸç”Ÿ App æ‰¿æ‹…ï¼Œä¿è¯æ€§èƒ½å’Œä½“éªŒï¼›ä½†åŒæ—¶æä¾›å°ç¨‹åºå…¥å£ç”¨äºåˆ†äº«ã€ç¤¾ç¾¤ä¼ æ’­ï¼›æ¨å¹¿æ´»åŠ¨é¡µé¢ç”¨ H5 å®ç°ï¼ŒåµŒå…¥åœ¨å…¬ä¼—å·èœå•ä¸­ã€‚è¿™ä¸‰è€…å…±åŒåä½œï¼Œå…¼é¡¾äº†ä½“éªŒã€å¼€å‘æ•ˆç‡å’Œä¼ æ’­æ•ˆæœã€‚</li></ul></div><p><code>å¾®ä¿¡å°ç¨‹åº vs åŸç”Ÿ H5 vs åŸç”Ÿ App</code> ï¼Œåº”å½“ä» <strong>è¿è¡Œç¯å¢ƒ</strong>ã€<strong>å¼€å‘æ–¹å¼</strong>ã€<strong>åŠŸèƒ½æƒé™</strong>ã€<strong>æ€§èƒ½</strong>ã€<strong>åœºæ™¯é€‚ç”¨</strong> ç­‰æ–¹é¢ç³»ç»Ÿå¯¹æ¯”ã€‚</p><table tabindex="0"><thead><tr><th style="text-align:center;">ç»´åº¦</th><th style="text-align:center;">å¾®ä¿¡å°ç¨‹åº</th><th style="text-align:center;">åŸç”Ÿ H5ï¼ˆHTML/CSS/JSï¼‰</th><th style="text-align:center;">åŸç”Ÿ Appï¼ˆAndroid/iOSï¼‰</th></tr></thead><tbody><tr><td style="text-align:center;"><strong>è¿è¡Œç¯å¢ƒ</strong></td><td style="text-align:center;">å¾®ä¿¡å®¹å™¨å†…</td><td style="text-align:center;">æµè§ˆå™¨ï¼ˆå¦‚ Chromeã€Safariï¼‰</td><td style="text-align:center;">æ“ä½œç³»ç»Ÿï¼ˆAndroid/iOSï¼‰</td></tr><tr><td style="text-align:center;"><strong>å¼€å‘è¯­è¨€</strong></td><td style="text-align:center;">WXML + WXSS + JS</td><td style="text-align:center;">HTML + CSS + JS</td><td style="text-align:center;">Java/Kotlinã€Swift/Obj-C</td></tr><tr><td style="text-align:center;"><strong>éƒ¨ç½²æ–¹å¼</strong></td><td style="text-align:center;">å¾®ä¿¡å¹³å°å®¡æ ¸ï¼Œä¸Šçº¿å³å¯ä½¿ç”¨</td><td style="text-align:center;">ç½‘é¡µéƒ¨ç½²åœ¨æœåŠ¡å™¨ï¼Œæ‰“å¼€å³ç”¨</td><td style="text-align:center;">åº”ç”¨å¸‚åœºä¸Šæ¶ã€ç”¨æˆ·ä¸‹è½½å®‰è£…</td></tr><tr><td style="text-align:center;"><strong>å®‰è£…æ–¹å¼</strong></td><td style="text-align:center;">æ— éœ€å®‰è£…ï¼Œæ‰«ç å³ç”¨</td><td style="text-align:center;">æ— éœ€å®‰è£…ï¼Œæµè§ˆå™¨è®¿é—®</td><td style="text-align:center;">éœ€ä¸‹è½½å¹¶å®‰è£…</td></tr><tr><td style="text-align:center;"><strong>æ€§èƒ½</strong></td><td style="text-align:center;">ä¸­ç­‰ï¼Œä»‹äº H5 ä¸åŸç”Ÿ App ä¹‹é—´</td><td style="text-align:center;">è¾ƒä½ï¼Œè¿è¡Œåœ¨æµè§ˆå™¨ä¸­</td><td style="text-align:center;">æœ€ä¼˜ï¼Œç³»ç»Ÿçº§è¿è¡Œ</td></tr><tr><td style="text-align:center;"><strong>ç³»ç»Ÿ API èƒ½åŠ›</strong></td><td style="text-align:center;">ä¸­ç­‰ï¼šå¾®ä¿¡æä¾›çš„å°è£… APIï¼ˆå¦‚æ‰«ç ã€ä½ç½®ï¼‰</td><td style="text-align:center;">å¾ˆå¼±ï¼Œä»…èƒ½ä½¿ç”¨æµè§ˆå™¨æš´éœ²çš„ APIï¼ˆå¦‚ localStorageï¼‰</td><td style="text-align:center;">å¼ºï¼šå¯è°ƒç”¨ç³»ç»Ÿæ‰€æœ‰åŠŸèƒ½ï¼ˆå¦‚è“ç‰™ã€ä¼ æ„Ÿå™¨ã€æ¨é€ç­‰ï¼‰</td></tr><tr><td style="text-align:center;"><strong>UI æ§åˆ¶</strong></td><td style="text-align:center;">ç”±å¾®ä¿¡æä¾›çš„ç»„ä»¶ç³»ç»Ÿæ§åˆ¶</td><td style="text-align:center;">è‡ªç”±åº¦è¾ƒé«˜ï¼Œä½†å—æµè§ˆå™¨é™åˆ¶</td><td style="text-align:center;">å®Œå…¨å¯å®šåˆ¶</td></tr><tr><td style="text-align:center;"><strong>å¼€å‘æˆæœ¬</strong></td><td style="text-align:center;">è¾ƒä½ï¼šä¸€æ¬¡å¼€å‘ï¼Œå…¨å¹³å°å¯ç”¨ï¼ˆå¾®ä¿¡ç”Ÿæ€ï¼‰</td><td style="text-align:center;">æœ€ä½ï¼šé€šç”¨ Web æŠ€æœ¯</td><td style="text-align:center;">é«˜ï¼šéœ€åˆ†åˆ«å¼€å‘ iOS å’Œ Android</td></tr><tr><td style="text-align:center;"><strong>æ›´æ–°æ–¹å¼</strong></td><td style="text-align:center;">å³æ—¶æ›´æ–°ï¼ˆç”±å¾®ä¿¡æ§åˆ¶ï¼‰</td><td style="text-align:center;">å³æ—¶æ›´æ–°ï¼ˆåå°æ›´æ–° HTMLï¼‰</td><td style="text-align:center;">éœ€å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œç”¨æˆ·æ‰‹åŠ¨æ›´æ–°</td></tr><tr><td style="text-align:center;"><strong>ç”¨æˆ·ç•™å­˜</strong></td><td style="text-align:center;">ä¸€èˆ¬ï¼ˆå¾®ä¿¡ä¸­æ‰“å¼€å³èµ°ï¼‰</td><td style="text-align:center;">å¼±ï¼ˆç½‘é¡µæ‰“å¼€å³èµ°ï¼‰</td><td style="text-align:center;">å¼ºï¼ˆå®‰è£…åå¯æ¨é€ã€æ²‰æ·€ç”¨æˆ·ï¼‰</td></tr><tr><td style="text-align:center;"><strong>å…¸å‹åœºæ™¯</strong></td><td style="text-align:center;">å¾®ä¿¡å†…å•†åŸã€å·¥å…·ã€æ´»åŠ¨é¡µ</td><td style="text-align:center;">è½»åº”ç”¨ã€æ´»åŠ¨é¡µã€åˆ†äº«é¡µ</td><td style="text-align:center;">é‡äº¤äº’ Appã€ç”µå•†ã€æ¸¸æˆ</td></tr></tbody></table><h3 id="å¾®ä¿¡å°ç¨‹åºå‘å¸ƒæµç¨‹" tabindex="-1">å¾®ä¿¡å°ç¨‹åºå‘å¸ƒæµç¨‹ï¼Ÿ <a class="header-anchor" href="#å¾®ä¿¡å°ç¨‹åºå‘å¸ƒæµç¨‹" aria-label="Permalink to &quot;å¾®ä¿¡å°ç¨‹åºå‘å¸ƒæµç¨‹ï¼Ÿ&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th style="text-align:center;">æ­¥éª¤</th><th style="text-align:center;">æ“ä½œå†…å®¹</th><th style="text-align:center;">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center;">â‘  æ³¨å†Œè´¦å·</td><td style="text-align:center;">ç™»å½• <a href="https://mp.weixin.qq.com/" target="_blank" rel="noreferrer">å¾®ä¿¡å…¬ä¼—å¹³å°</a> â†’ æ³¨å†Œå°ç¨‹åºè´¦å·</td><td style="text-align:center;">é€‰æ‹©â€œå°ç¨‹åºâ€ç±»å‹ï¼Œå®Œæˆé‚®ç®±éªŒè¯ã€ä¼ä¸šè®¤è¯ï¼ˆæˆ–ä¸ªäººï¼‰</td></tr><tr><td style="text-align:center;">â‘¡ è®¾ç½®å°ç¨‹åºä¿¡æ¯</td><td style="text-align:center;">å¡«å†™å°ç¨‹åºåç§°ã€å¤´åƒã€æœåŠ¡ç±»ç›®ã€ç®€ä»‹ç­‰</td><td style="text-align:center;">å»ºè®®å¡«å†™æ¸…æ™°ï¼Œæ–¹ä¾¿å®¡æ ¸</td></tr><tr><td style="text-align:center;">â‘¢ é…ç½®å¼€å‘è€…</td><td style="text-align:center;">æ·»åŠ å¼€å‘è€…ã€ä½“éªŒè€…è´¦å·</td><td style="text-align:center;">åœ¨â€œå¼€å‘ç®¡ç†â€ä¸­é…ç½®ï¼Œä¾¿äºå¤šäººåä½œå¼€å‘å’Œæµ‹è¯•</td></tr><tr><td style="text-align:center;">â‘£ æœ¬åœ°å¼€å‘ä¸é¢„è§ˆ</td><td style="text-align:center;">ä½¿ç”¨<strong>å¾®ä¿¡å¼€å‘è€…å·¥å…·</strong>å¼€å‘ â†’ é¢„è§ˆ</td><td style="text-align:center;">æ”¯æŒä½¿ç”¨ <code>npm</code> æ„å»ºã€çœŸæœºè°ƒè¯•ã€æ¨¡æ‹Ÿå™¨é¢„è§ˆç­‰</td></tr><tr><td style="text-align:center;">â‘¤ æäº¤ä»£ç å®¡æ ¸</td><td style="text-align:center;">åœ¨å¼€å‘è€…å·¥å…·ä¸­ä¸Šä¼ ä»£ç  â†’ å…¬ä¼—å¹³å°æäº¤å®¡æ ¸</td><td style="text-align:center;">æäº¤å‰å¯ç”Ÿæˆä½“éªŒç‰ˆï¼ˆä½“éªŒäºŒç»´ç ï¼‰ä¾›æµ‹è¯•</td></tr><tr><td style="text-align:center;">â‘¥ å®¡æ ¸é€šè¿‡å¹¶å‘å¸ƒä¸Šçº¿</td><td style="text-align:center;">å®¡æ ¸æˆåŠŸåç‚¹å‡»â€œå‘å¸ƒâ€æŒ‰é’®</td><td style="text-align:center;">æ­£å¼ä¸Šçº¿ï¼Œæ‰€æœ‰ç”¨æˆ·å¯è®¿é—®å°ç¨‹åº</td></tr></tbody></table><div class="warning custom-block"><p class="custom-block-title">æ¨¡æ¿</p><ul><li>å¾®ä¿¡å°ç¨‹åºå‘å¸ƒæµç¨‹åŒ…æ‹¬æ³¨å†Œå°ç¨‹åºè´¦å·ã€å¡«å†™åŸºæœ¬ä¿¡æ¯ã€ä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·å¼€å‘å¹¶è°ƒè¯•ä»£ç ï¼Œæäº¤å®¡æ ¸åç”±å¾®ä¿¡å¹³å°äººå·¥æˆ–æœºå™¨å®¡æ ¸ï¼Œå®¡æ ¸é€šè¿‡åå¯å‘å¸ƒä¸Šçº¿ã€‚</li><li>å®¡æ ¸æœŸé—´éœ€è¦ç‰¹åˆ«æ³¨æ„ç±»ç›®ã€åŠŸèƒ½æ˜¯å¦åˆè§„ï¼Œæ¥å£æƒé™æ˜¯å¦å¼€æ”¾ã€UI è®¾è®¡æ˜¯å¦ç¬¦åˆè§„èŒƒã€‚æäº¤å‰å»ºè®®å…ˆç”Ÿæˆä½“éªŒç‰ˆï¼Œç”±äº§å“å’Œæµ‹è¯•å…¨é¢éªŒè¯ã€‚</li></ul><hr><ul><li>ä»£ç å®¡æ ¸æ—¶é—´ï¼šé€šå¸¸ 1 ä¸ªå·¥ä½œæ—¥å†…ï¼ˆéƒ¨åˆ†ç±»ç›®å¦‚åŒ»ç–—/é‡‘èå¯èƒ½æ›´ä¹…ï¼‰</li><li>ä½“éªŒç‰ˆåˆ†äº«ï¼šæ”¯æŒé…ç½®â€œä½“éªŒè€…â€æ‰«ç ä½“éªŒï¼ˆæ‰«ç æœ‰æ•ˆæœŸæœ‰é™ï¼‰</li><li>ç±»ç›®ä¸ç¬¦ä¼šè¢«é©³å›ï¼šåŠŸèƒ½å¿…é¡»å’Œä½ é€‰æ‹©çš„æœåŠ¡ç±»ç›®ä¸€è‡´ï¼Œå¦åˆ™å®¡æ ¸ä¸é€šè¿‡</li><li>ç°åº¦å‘å¸ƒåŠŸèƒ½ï¼šç›®å‰ä»…æ”¯æŒä¸€äº›ä¼ä¸šå°ç¨‹åºè¿›è¡Œç°åº¦å‘å¸ƒï¼ˆéœ€æ»¡è¶³æ¡ä»¶ï¼‰</li></ul></div><h3 id="å¾®ä¿¡å°ç¨‹åºç”Ÿå‘½å‘¨æœŸ" tabindex="-1">å¾®ä¿¡å°ç¨‹åºç”Ÿå‘½å‘¨æœŸï¼Ÿ <a class="header-anchor" href="#å¾®ä¿¡å°ç¨‹åºç”Ÿå‘½å‘¨æœŸ" aria-label="Permalink to &quot;å¾®ä¿¡å°ç¨‹åºç”Ÿå‘½å‘¨æœŸï¼Ÿ&quot;">â€‹</a></h3><p>å¾®ä¿¡å°ç¨‹åº &amp; uni-app ç”Ÿå‘½å‘¨æœŸå¯¹æ¯”è¡¨</p><table tabindex="0"><thead><tr><th style="text-align:center;">ç”Ÿå‘½å‘¨æœŸç±»åˆ«</th><th style="text-align:center;">UniApp</th><th style="text-align:center;">å¾®ä¿¡å°ç¨‹åºï¼ˆåŸç”Ÿï¼‰</th><th style="text-align:center;">åŒºåˆ«è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center;"><strong>åº”ç”¨çº§</strong></td><td style="text-align:center;"><code>onLaunch</code>ã€<code>onShow</code>ã€<code>onHide</code>ã€<code>onError</code></td><td style="text-align:center;">åŒåï¼ˆå®Œå…¨ä¸€è‡´ï¼‰</td><td style="text-align:center;">åŸºæœ¬ä¸€è‡´</td></tr><tr><td style="text-align:center;"><strong>é¡µé¢çº§</strong></td><td style="text-align:center;"><code>onLoad</code>ã€<code>onShow</code>ã€<code>onReady</code>ã€<code>onHide</code>ã€<code>onUnload</code>ã€<code>onPullDownRefresh</code>ã€<code>onReachBottom</code></td><td style="text-align:center;">åŒåï¼ˆå®Œå…¨ä¸€è‡´ï¼‰</td><td style="text-align:center;">åŸºæœ¬ä¸€è‡´</td></tr><tr><td style="text-align:center;"><strong>ç»„ä»¶çº§</strong></td><td style="text-align:center;"><code>created</code>ã€<code>attached</code>ã€<code>ready</code>ã€<code>moved</code>ã€<code>detached</code>ã€<code>destroyed</code>ï¼ˆVue è¯­ä¹‰ï¼‰</td><td style="text-align:center;"><code>created</code>ã€<code>attached</code>ã€<code>ready</code>ã€<code>moved</code>ã€<code>detached</code></td><td style="text-align:center;">å‘½ååŸºæœ¬ä¸€è‡´ï¼Œä½† UniApp å¤šäº† <code>destroyed</code>ï¼ˆVue é£æ ¼ï¼‰</td></tr></tbody></table><p><a href="#uni-app-çš„ç”Ÿå‘½å‘¨æœŸ">ğŸ‘‰ é˜¶æ®µäºŒ - uni-app çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ</a></p><h3 id="å¾®ä¿¡å°ç¨‹åºé¦–å±åŠ è½½ä¼˜åŒ–" tabindex="-1">å¾®ä¿¡å°ç¨‹åºé¦–å±åŠ è½½ä¼˜åŒ–ï¼Ÿ <a class="header-anchor" href="#å¾®ä¿¡å°ç¨‹åºé¦–å±åŠ è½½ä¼˜åŒ–" aria-label="Permalink to &quot;å¾®ä¿¡å°ç¨‹åºé¦–å±åŠ è½½ä¼˜åŒ–ï¼Ÿ&quot;">â€‹</a></h3><blockquote><p>é¡µé¢é¦–å±æ¸²æŸ“çš„ä¼˜åŒ–ï¼Œç›®çš„æ˜¯è®©ã€Œé¦–é¡µæ¸²æŸ“å®Œæˆã€(<code>Page.onReady</code>) å°½å¯èƒ½æå‰ã€‚ä½†å¾ˆå¤šæƒ…å†µä¸‹ã€Œé¦–é¡µæ¸²æŸ“å®Œæˆã€å¯èƒ½è¿˜æ˜¯ç©ºç™½é¡µé¢ï¼Œå› æ­¤æ›´é‡è¦çš„æ˜¯è®©ç”¨æˆ·èƒ½å¤Ÿæ›´æ—©çš„çœ‹åˆ°é¡µé¢å†…å®¹ï¼ˆFirst Paint æˆ– First Contentful Paintï¼‰ã€‚</p></blockquote><ol><li>ä½¿ç”¨ã€ŒæŒ‰éœ€æ³¨å…¥ã€å’Œã€Œç”¨æ—¶æ³¨å…¥ã€</li></ol><p>é™¤äº†ä¼˜åŒ–ä»£ç æ³¨å…¥çš„è€—æ—¶å¤–ï¼Œã€ŒæŒ‰éœ€æ³¨å…¥ã€å’Œã€Œç”¨æ—¶æ³¨å…¥ã€ä¹Ÿå¯ä»¥å‡å°‘éœ€è¦åˆå§‹åŒ–çš„ç»„ä»¶æ•°é‡ï¼Œé™ä½å®é™…é¡µé¢æ¸²æŸ“çš„è€—æ—¶ï¼Œä½¿ã€Œé¦–é¡µæ¸²æŸ“å®Œæˆã€æå‰ã€‚</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;lazyCodeLoading&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;requiredComponents&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ol start="2"><li>å¯ç”¨ã€Œåˆå§‹æ¸²æŸ“ç¼“å­˜ã€</li></ol><p>è‡ªåŸºç¡€åº“ç‰ˆæœ¬ 2.11.1 èµ·ï¼Œå°ç¨‹åºæ”¯æŒå¯ç”¨åˆå§‹æ¸²æŸ“ç¼“å­˜ã€‚å¼€å¯åï¼Œå¯ä»¥åœ¨éé¦–æ¬¡å¯åŠ¨æ—¶ï¼Œä½¿è§†å›¾å±‚ä¸éœ€è¦ç­‰å¾…é€»è¾‘å±‚åˆå§‹åŒ–å®Œæ¯•ï¼Œè€Œç›´æ¥æå‰å°†é¡µé¢æ¸²æŸ“ç»“æœå±•ç¤ºç»™ç”¨æˆ·ã€‚</p><ol start="3"><li>é¿å…å¼•ç”¨æœªä½¿ç”¨çš„è‡ªå®šä¹‰ç»„ä»¶</li></ol><p>åœ¨é¡µé¢æ¸²æŸ“æ—¶ï¼Œä¼šåˆå§‹åŒ–åœ¨å½“å‰é¡µé¢é…ç½®å’Œå…¨å±€é…ç½®é€šè¿‡ usingComponents å¼•ç”¨çš„è‡ªå®šä¹‰ç»„ä»¶ï¼Œä»¥åŠç»„ä»¶æ‰€ä¾èµ–çš„å…¶ä»–è‡ªå®šä¹‰ç»„ä»¶ã€‚æœªä½¿ç”¨çš„è‡ªå®šä¹‰ç»„ä»¶ä¼šå½±å“æ¸²æŸ“è€—æ—¶ã€‚</p><ol start="4"><li>ç²¾ç®€é¦–å±æ•°æ®</li></ol><p>é¦–é¡µæ¸²æŸ“çš„è€—æ—¶ä¸é¡µé¢çš„å¤æ‚ç¨‹åº¦æ­£ç›¸å…³ã€‚å¯¹äºå¤æ‚é¡µé¢ï¼Œå¯ä»¥é€‰æ‹©è¿›è¡Œæ¸è¿›å¼çš„æ¸²æŸ“ï¼Œæ ¹æ®é¡µé¢å†…å®¹ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆå±•ç¤ºé¡µé¢çš„å…³é”®éƒ¨åˆ†ï¼Œå¯¹äºéå…³é”®éƒ¨åˆ†æˆ–è€…ä¸å¯è§çš„éƒ¨åˆ†å¯ä»¥å»¶è¿Ÿæ›´æ–°ã€‚</p><p>æ­¤å¤–ï¼Œä¸è§†å›¾å±‚æ¸²æŸ“æ— å…³çš„æ•°æ®åº”å°½é‡ä¸è¦æ”¾åœ¨ data ä¸­ï¼Œé¿å…å½±å“é¡µé¢æ¸²æŸ“æ—¶é—´ã€‚</p><ol start="5"><li>æå‰é¦–å±æ•°æ®è¯·æ±‚</li></ol><p>å¾ˆå¤šå°ç¨‹åºåœ¨æ¸²æŸ“é¦–é¡µæ—¶ï¼Œéœ€è¦ä¾èµ–æœåŠ¡ç«¯çš„æ¥å£æ•°æ®ï¼ˆå¦‚å•†å“åˆ—è¡¨ç­‰ï¼‰ï¼Œæ­¤æ—¶å°ç¨‹åºçš„é¦–é¡µå¯èƒ½æ˜¯ç©ºç™½æˆ–è€…éª¨æ¶å±ã€‚</p><p>ç”±äºç½‘ç»œè¯·æ±‚éœ€è¦ç›¸å¯¹è¾ƒé•¿çš„æ—¶é—´ï¼Œæˆ‘ä»¬å»ºè®®å¼€å‘è€…åœ¨ Page.onLoad æˆ–æ›´æ—©çš„æ—¶æœºå‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œè€Œä¸åº”ç­‰å¾… Page.onReady ä¹‹åå†è¿›è¡Œã€‚</p><ol start="6"><li>ç¼“å­˜è¯·æ±‚æ•°æ®</li></ol><p>å°ç¨‹åºæä¾›äº† wx.setStorageã€wx.getStorage ç­‰è¯»å†™æœ¬åœ°ç¼“å­˜çš„èƒ½åŠ›ï¼Œæ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ï¼Œè¿”å›çš„ä¼šæ¯”ç½‘ç»œè¯·æ±‚å¿«ã€‚å¦‚æœå¼€å‘è€…åŸºäºæŸäº›åŸå› æ— æ³•é‡‡ç”¨æ•°æ®é¢„æ‹‰å–ä¸å‘¨æœŸæ€§æ›´æ–°ï¼Œæˆ‘ä»¬æ¨èä¼˜å…ˆä»ç¼“å­˜ä¸­è·å–æ•°æ®æ¥æ¸²æŸ“è§†å›¾ï¼Œç­‰å¾…ç½‘ç»œè¯·æ±‚è¿”å›åè¿›è¡Œæ›´æ–°ã€‚</p><ol start="7"><li>éª¨æ¶å±</li></ol><p>éª¨æ¶å±é€šå¸¸ç”¨äºåœ¨é¡µé¢å®Œå…¨æ¸²æŸ“ä¹‹å‰ï¼Œé€šè¿‡ä¸€äº›ç°è‰²çš„åŒºå—å¤§è‡´å‹¾å‹’å‡ºè½®å»“ï¼Œå¾…æ•°æ®åŠ è½½å®Œæˆåï¼Œå†æ›¿æ¢æˆçœŸå®çš„å†…å®¹ã€‚</p><h3 id="å¾®ä¿¡å°ç¨‹åºä½¿ç”¨è¿‡å“ªäº›-api" tabindex="-1">å¾®ä¿¡å°ç¨‹åºä½¿ç”¨è¿‡å“ªäº› APIï¼Ÿ <a class="header-anchor" href="#å¾®ä¿¡å°ç¨‹åºä½¿ç”¨è¿‡å“ªäº›-api" aria-label="Permalink to &quot;å¾®ä¿¡å°ç¨‹åºä½¿ç”¨è¿‡å“ªäº› APIï¼Ÿ&quot;">â€‹</a></h3><p>å¸¸è§ API åŠåº”ç”¨åœºæ™¯å¦‚ä¸‹ï¼š</p><ul><li>é¡µé¢è·³è½¬ vs tabBar è·³è½¬çš„åŒºåˆ«ï¼ˆnavigateTo / switchTabï¼‰</li><li>æœ¬åœ°ç¼“å­˜çš„åŒæ­¥ä¸å¼‚æ­¥æ“ä½œï¼ˆåŒºåˆ«ã€ä½¿ç”¨åœºæ™¯ï¼‰</li><li>wx.login + code è·å– openid çš„æµç¨‹</li><li>ä¸Šä¼ å›¾ç‰‡æµç¨‹ï¼ˆwx.chooseImage + wx.uploadFileï¼‰</li><li>ç½‘ç»œè¯·æ±‚å°è£…ï¼ˆæ¯”å¦‚å°è£… wx.request ä¸º Promise å½¢å¼ï¼‰</li><li>æƒé™æˆæƒå’Œ getUserProfile vs getUserInfo çš„å˜åŒ–ï¼ˆç‰¹åˆ«æ˜¯ 2021 å¹´åæ”¿ç­–å˜åŒ–ï¼‰</li><li>ä½¿ç”¨ Canvas æˆ–å›¾ç‰‡å‹ç¼©ç›¸å…³ APIï¼ˆå¦‚æœä½ æœ‰ä¸Šä¼ ä¼˜åŒ–ç›¸å…³é¡¹ç›®ï¼‰</li></ul><h2 id="é˜¶æ®µä¸ƒ" tabindex="-1">é˜¶æ®µä¸ƒ <a class="header-anchor" href="#é˜¶æ®µä¸ƒ" aria-label="Permalink to &quot;é˜¶æ®µä¸ƒ&quot;">â€‹</a></h2><h3 id="callã€applyã€bind-çš„åŒºåˆ«" tabindex="-1">callã€applyã€bind çš„åŒºåˆ«ï¼Ÿ <a class="header-anchor" href="#callã€applyã€bind-çš„åŒºåˆ«" aria-label="Permalink to &quot;callã€applyã€bind çš„åŒºåˆ«ï¼Ÿ&quot;">â€‹</a></h3><div class="warning custom-block"><p class="custom-block-title">æ¨¡æ¿</p><p><code>call()</code>ã€<code>apply()</code> å’Œ <code>bind()</code> éƒ½å¯ä»¥æ”¹å˜å‡½æ•°è¿è¡Œæ—¶çš„ <code>this</code> æŒ‡å‘ï¼Œä½†åŒºåˆ«åœ¨äºæ˜¯å¦ç«‹å³æ‰§è¡Œï¼Œä»¥åŠå‚æ•°ä¼ é€’æ–¹å¼ã€‚</p><ul><li><code>call()</code> å’Œ <code>apply()</code> éƒ½ä¼šç«‹å³è°ƒç”¨å‡½æ•°ï¼ŒåŒºåˆ«æ˜¯å‚æ•°æ ¼å¼ä¸åŒï¼ˆcall é€—å·ï¼Œapply æ•°ç»„ï¼‰ï¼›</li><li><code>bind()</code> ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œå¯ç”¨äºå»¶è¿Ÿæ‰§è¡Œã€å‡½æ•°æŸ¯é‡ŒåŒ–ã€äº‹ä»¶å›è°ƒç»‘å®šç­‰åœºæ™¯ã€‚</li></ul><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘é€šå¸¸åœ¨æ„é€ å‡½æ•°ç»§æ‰¿ã€äº‹ä»¶å›è°ƒä¸­ä½¿ç”¨è¿™å‡ ä¸ªæ–¹æ³•æ¥çµæ´»æ§åˆ¶å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</p></div><table tabindex="0"><thead><tr><th style="text-align:center;">æ–¹æ³•</th><th style="text-align:center;">å«ä¹‰</th><th style="text-align:center;">æ˜¯å¦ç«‹å³æ‰§è¡Œ</th><th style="text-align:center;">å‚æ•°ä¼ é€’æ–¹å¼</th></tr></thead><tbody><tr><td style="text-align:center;"><code>call</code></td><td style="text-align:center;">è°ƒç”¨å‡½æ•°å¹¶æ”¹å˜ <code>this</code> æŒ‡å‘</td><td style="text-align:center;">âœ… æ˜¯</td><td style="text-align:center;">ä¾æ¬¡ä¼ å…¥å‚æ•°ï¼ˆé€—å·åˆ†éš”ï¼‰</td></tr><tr><td style="text-align:center;"><code>apply</code></td><td style="text-align:center;">è°ƒç”¨å‡½æ•°å¹¶æ”¹å˜ <code>this</code> æŒ‡å‘</td><td style="text-align:center;">âœ… æ˜¯</td><td style="text-align:center;">å‚æ•°ä»¥æ•°ç»„å½¢å¼ä¼ å…¥</td></tr><tr><td style="text-align:center;"><code>bind</code></td><td style="text-align:center;">è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œæ”¹å˜äº† <code>this</code> æŒ‡å‘</td><td style="text-align:center;">âŒ å¦ï¼ˆéœ€æ‰‹åŠ¨è°ƒç”¨ï¼‰</td><td style="text-align:center;">ä¾æ¬¡ä¼ å…¥å‚æ•°</td></tr></tbody></table><h4 id="åŸºæœ¬ç”¨æ³•å¯¹æ¯”" tabindex="-1">åŸºæœ¬ç”¨æ³•å¯¹æ¯” <a class="header-anchor" href="#åŸºæœ¬ç”¨æ³•å¯¹æ¯”" aria-label="Permalink to &quot;åŸºæœ¬ç”¨æ³•å¯¹æ¯”&quot;">â€‹</a></h4><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> greet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">greeting</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">punctuation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">greeting</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}, I&#39;m \${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">punctuation</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> person</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Zan&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// call</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">greet.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(person, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Hello, I&#39;m Zan!</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// apply</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">greet.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(person, [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hi&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Hi, I&#39;m Zan...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// bind</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boundGreet</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> greet.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(person, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hey&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">boundGreet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Hey, I&#39;m Zan?</span></span></code></pre></div><h4 id="åº”ç”¨åœºæ™¯ä¸¾ä¾‹" tabindex="-1">åº”ç”¨åœºæ™¯ä¸¾ä¾‹ <a class="header-anchor" href="#åº”ç”¨åœºæ™¯ä¸¾ä¾‹" aria-label="Permalink to &quot;åº”ç”¨åœºæ™¯ä¸¾ä¾‹&quot;">â€‹</a></h4><p>âœ… <code>call</code> / <code>apply</code></p><ul><li>å¤šç”¨äºç«‹å³è°ƒç”¨å‡½æ•°å¹¶ç»‘å®šä¸Šä¸‹æ–‡</li><li>æ¯”å¦‚ï¼šç»§æ‰¿æ„é€ å‡½æ•°ä¸­çš„å±æ€§</li></ul><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Animal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Dog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Animal.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, name); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç»§æ‰¿ Animal çš„å±æ€§</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.color </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> color;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li>åˆ©ç”¨ <code>apply</code> è¿›è¡Œå‚æ•°è§£æ„è°ƒç”¨ï¼ˆå¦‚å‡½æ•°æŸ¯é‡ŒåŒ–ã€Math æ–¹æ³•ï¼‰</li></ul><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Math.max.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 5</span></span></code></pre></div><p>âœ… bind</p><ul><li>å¤šç”¨äºå»¶è¿Ÿè°ƒç”¨ï¼Œä¾‹å¦‚ï¼šäº‹ä»¶ç»‘å®šã€å®šæ—¶å™¨ã€å‡½æ•°æŸ¯é‡ŒåŒ–</li></ul><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> person</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;zan&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sayName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.name);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(person);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sayName, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¾“å‡º zan</span></span></code></pre></div><h3 id="æ€ä¹ˆçœ‹äº‹ä»¶å¾ªç¯æœºåˆ¶-æ€ä¹ˆçœ‹åŸå‹å’ŒåŸå‹é“¾" tabindex="-1">æ€ä¹ˆçœ‹äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Ÿæ€ä¹ˆçœ‹åŸå‹å’ŒåŸå‹é“¾ï¼Ÿ <a class="header-anchor" href="#æ€ä¹ˆçœ‹äº‹ä»¶å¾ªç¯æœºåˆ¶-æ€ä¹ˆçœ‹åŸå‹å’ŒåŸå‹é“¾" aria-label="Permalink to &quot;æ€ä¹ˆçœ‹äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Ÿæ€ä¹ˆçœ‹åŸå‹å’ŒåŸå‹é“¾ï¼Ÿ&quot;">â€‹</a></h3><ul><li>äº‹ä»¶å¾ªç¯ï¼š JS é€šè¿‡äº‹ä»¶å¾ªç¯åŒºåˆ†åŒæ­¥ä»»åŠ¡ã€å¾®ä»»åŠ¡ã€å®ä»»åŠ¡ï¼Œä»¥å®ç°å¼‚æ­¥éé˜»å¡æ‰§è¡Œã€‚</li><li>åŸå‹é“¾ï¼š JS ä¸­å¯¹è±¡é€šè¿‡ <code>__proto__</code> æŒ‡å‘å…¶åŸå‹ï¼Œé€å±‚æŸ¥æ‰¾å½¢æˆåŸå‹é“¾ï¼Œå®ç°ç»§æ‰¿ä¸å±æ€§å…±äº«ã€‚</li></ul><div class="warning custom-block"><p class="custom-block-title">æ¨¡æ¿</p><p>JavaScript æ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œå®ƒé€šè¿‡â€œäº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰â€æœºåˆ¶æ¥å®ç°å¼‚æ­¥éé˜»å¡æ“ä½œã€‚æ‰§è¡Œé¡ºåºæ˜¯ï¼šå…ˆæ‰§è¡Œä¸»çº¿ç¨‹åŒæ­¥ä»»åŠ¡ï¼Œç„¶åä¸æ–­ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºå¼‚æ­¥ä»»åŠ¡ã€‚</p><p>å¼‚æ­¥ä»»åŠ¡åˆ†ä¸º <strong>å®ä»»åŠ¡ï¼ˆMacroTaskï¼‰</strong> å’Œ <strong>å¾®ä»»åŠ¡ï¼ˆMicroTaskï¼‰</strong>ã€‚æ¯ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œä¼šå…ˆæ¸…ç©ºæ‰€æœ‰å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå†æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ã€‚</p><p>å¾®ä»»åŠ¡å¸¸è§äº <strong>Promise.then()</strong>ã€<strong>MutationObserver</strong>ï¼Œå®ä»»åŠ¡åˆ™åŒ…æ‹¬ <strong>setTimeout</strong>ã€<strong>setInterval</strong>ã€<strong>DOM äº‹ä»¶å›è°ƒ</strong>ã€<strong>MessageChannel</strong> ç­‰ã€‚</p><blockquote><p>è¿›é˜¶ï¼š</p><p>JS çš„äº‹ä»¶å¾ªç¯æœºåˆ¶æœ¬è´¨ä¸Šæ˜¯é€šè¿‡æ‰§è¡Œæ ˆ + æ¶ˆæ¯é˜Ÿåˆ—æ¥è°ƒåº¦ä»»åŠ¡ã€‚å®ƒä½¿å¾—æµè§ˆå™¨åœ¨å•çº¿ç¨‹ä¸‹ä»èƒ½æ‰§è¡Œ I/Oã€ç½‘ç»œã€å®šæ—¶å™¨ç­‰å¼‚æ­¥ä»»åŠ¡è€Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚</p><p>åœ¨ Vue å’Œ React ä¸­æˆ‘ä»¬ä¹Ÿå¸¸ç”¨å¾®ä»»åŠ¡æœºåˆ¶æ¥æ§åˆ¶å¼‚æ­¥æ›´æ–°ï¼Œä¾‹å¦‚ Vue çš„ <code>nextTick()</code> æœ¬è´¨å°±æ˜¯åŸºäº Promise å¾®ä»»åŠ¡çš„ã€‚</p></blockquote><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;start&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;timeout&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;promise&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;end&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><hr><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å‡º</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">promise</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">timeout</span></span></code></pre></div><p>è§£é‡Šï¼šPromise.then() æ˜¯å¾®ä»»åŠ¡ï¼Œåœ¨å½“å‰å®ä»»åŠ¡ç»“æŸåç«‹å³æ‰§è¡Œï¼Œè€Œ setTimeout æ˜¯ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ã€‚</p></div><div class="warning custom-block"><p class="custom-block-title">æ¨¡æ¿</p><p>åœ¨ JavaScript ä¸­ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå†…éƒ¨å±æ€§ <code>[[Prototype]]</code>ï¼ˆåœ¨ä»£ç ä¸­å¯é€šè¿‡ <code>__proto__</code> è®¿é—®ï¼‰ï¼Œå®ƒæŒ‡å‘åˆ›å»ºå®ƒçš„æ„é€ å‡½æ•°çš„ <code>prototype</code> å¯¹è±¡ã€‚</p><p>å½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±ä¼šæ²¿ç€ <code>__proto__</code> å‘ä¸ŠæŸ¥æ‰¾ï¼Œè¿™æ¡é“¾è·¯å°±å«åšåŸå‹é“¾ï¼ˆPrototype Chainï¼‰ã€‚</p><p>é€šè¿‡åŸå‹é“¾ï¼ŒJavaScript å®ç°äº†å¯¹è±¡çš„ç»§æ‰¿æœºåˆ¶ã€‚</p><blockquote><p>è¿›é˜¶ï¼š</p><p>åŸå‹å’ŒåŸå‹é“¾æ˜¯ JS ä¸­å®ç°ç»§æ‰¿å’Œå±æ€§æŸ¥æ‰¾çš„åŸºç¡€æœºåˆ¶ã€‚é€šè¿‡æ„é€ å‡½æ•°çš„ <code>prototype</code> å±æ€§å’Œå®ä¾‹å¯¹è±¡çš„ <code>__proto__</code> é“¾æ¥ï¼Œæ„æˆäº†ä¸€æ¡æŸ¥æ‰¾è·¯å¾„ã€‚è¿™æ¡é“¾è·¯å†³å®šäº† JS çš„å±æ€§ç»§æ‰¿é€»è¾‘ï¼Œæ˜¯ <code>instanceof</code>ã€ç»§æ‰¿ã€å¤šæ€çš„åº•å±‚åŸºç¡€ã€‚</p></blockquote><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sayHi</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hi, I am &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.name);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Zan&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">p.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sayHi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Hi, I am Zan</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å±æ€§æŸ¥æ‰¾é¡ºåºï¼šp â†’ p.__proto__ (Person.prototype) â†’ Object.prototype â†’ null</span></span></code></pre></div><table tabindex="0"><thead><tr><th style="text-align:center;">å…³é”®è¯</th><th style="text-align:center;">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center;"><code>__proto__</code></td><td style="text-align:center;">å®ä¾‹å¯¹è±¡çš„åŸå‹æŒ‡é’ˆ</td></tr><tr><td style="text-align:center;"><code>prototype</code></td><td style="text-align:center;">æ„é€ å‡½æ•°åˆ›å»ºå®ä¾‹æ—¶çš„åŸå‹æ¨¡æ¿</td></tr><tr><td style="text-align:center;"><code>constructor</code></td><td style="text-align:center;">åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§ï¼ŒæŒ‡å›æ„é€ å‡½æ•°</td></tr><tr><td style="text-align:center;"><code>instanceof</code></td><td style="text-align:center;">åˆ¤æ–­åŸå‹é“¾ä¸­æ˜¯å¦åŒ…å«æŸæ„é€ å‡½æ•°çš„ prototype</td></tr></tbody></table><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(p.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">__proto__</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">constructor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Person); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">instanceof</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span></code></pre></div></div><h3 id="vue2-å’Œ-vue3-åŒºåˆ«-vue-å’Œ-react-åŒºåˆ«" tabindex="-1">vue2 å’Œ vue3 åŒºåˆ«ï¼Ÿvue å’Œ react åŒºåˆ«ï¼Ÿ <a class="header-anchor" href="#vue2-å’Œ-vue3-åŒºåˆ«-vue-å’Œ-react-åŒºåˆ«" aria-label="Permalink to &quot;vue2 å’Œ vue3 åŒºåˆ«ï¼Ÿvue å’Œ react åŒºåˆ«ï¼Ÿ&quot;">â€‹</a></h3><h4 id="vue2-vue3" tabindex="-1">vue2 &amp; vue3 <a class="header-anchor" href="#vue2-vue3" aria-label="Permalink to &quot;vue2 &amp; vue3&quot;">â€‹</a></h4><div class="warning custom-block"><p class="custom-block-title">æ¨¡æ¿</p><p>Vue3 æ˜¯å¯¹ Vue2 çš„åº•å±‚é‡æ„ï¼Œæœ€å¤§çš„å˜åŒ–æ˜¯å¼•å…¥äº† Composition API å’ŒåŸºäº Proxy çš„å“åº”å¼ç³»ç»Ÿã€‚å®ƒæ›´é€‚åˆå¤§å‹é¡¹ç›®çš„æ¨¡å—åŒ–ã€é€»è¾‘å¤ç”¨ï¼ŒåŒæ—¶æ€§èƒ½å’Œ TypeScript æ”¯æŒä¹Ÿæœ‰æ˜¾è‘—æå‡ã€‚</p><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¦‚æœé¡¹ç›®è¾ƒå¤§æˆ–éœ€è¦é«˜æ€§èƒ½ã€TS æ”¯æŒï¼Œæˆ‘ä¼šä¼˜å…ˆé€‰æ‹© Vue3ã€‚</p></div><table tabindex="0"><thead><tr><th>ç»´åº¦</th><th>Vue2</th><th>Vue3ï¼ˆé‡å¤§å‡çº§ï¼‰</th></tr></thead><tbody><tr><td><strong>å“åº”å¼åŸç†</strong></td><td><code>Object.defineProperty</code></td><td>âœ… ä½¿ç”¨ <code>Proxy</code>ï¼Œæ”¯æŒæ›´å¤æ‚çš„ç»“æ„</td></tr><tr><td><strong>è¯­æ³•é£æ ¼</strong></td><td>Options API</td><td>âœ… å¼•å…¥ Composition APIï¼ˆç»„åˆå¼ APIï¼‰</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>è¾ƒæ…¢ï¼ˆå°¤å…¶æ˜¯å¤§å‹ç»„ä»¶ï¼‰</td><td>âœ… æ›´å¿«ã€æ›´è½»ï¼ˆæ›´å¥½çš„ç¼–è¯‘ä¼˜åŒ–ï¼‰</td></tr><tr><td><strong>TypeScript æ”¯æŒ</strong></td><td>è¾ƒå·®</td><td>âœ… ä»åº•å±‚å¼€å§‹æ”¯æŒ TS</td></tr><tr><td><strong>Fragment</strong></td><td>âŒ ä¸æ”¯æŒï¼ˆå¿…é¡»æœ‰æ ¹å…ƒç´ ï¼‰</td><td>âœ… æ”¯æŒå¤šä¸ªæ ¹èŠ‚ç‚¹</td></tr><tr><td><strong>Teleport / Suspense</strong></td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… æ–°å¢ç»„ä»¶ï¼šä¼ é€é—¨ã€å¼‚æ­¥ç»„ä»¶æ›´çµæ´»</td></tr><tr><td><strong>ç”Ÿå‘½å‘¨æœŸåç§°</strong></td><td>æ¯”å¦‚ <code>created</code>ã€<code>mounted</code></td><td>âœ… æ–°å¢ <code>onMounted()</code> ç­‰ç»„åˆ API</td></tr></tbody></table><h4 id="vue-react" tabindex="-1">vue &amp; react <a class="header-anchor" href="#vue-react" aria-label="Permalink to &quot;vue &amp; react&quot;">â€‹</a></h4><div class="warning custom-block"><p class="custom-block-title">æ¨¡æ¿</p><p>Vue æ›´é€‚åˆå¿«é€Ÿä¸Šæ‰‹å’Œä¸­å°å‹é¡¹ç›®ï¼Œè¯­æ³•ç›´è§‚ã€æ–‡æ¡£å®Œå–„ï¼›è€Œ React æ›´å¼ºè°ƒå‡½æ•°å¼æ€æƒ³ã€çŠ¶æ€é©±åŠ¨ï¼Œé€‚åˆæ„å»ºçµæ´»ã€è§„æ¨¡åŒ–çš„åº”ç”¨ã€‚</p><p>æˆ‘ä¸ªäººæ›´å€¾å‘ Vue åšé¡¹ç›®åˆæœŸå¿«é€Ÿå¼€å‘ï¼Œä¹Ÿç†Ÿæ‚‰ React çš„ Hooks å’Œå‡½æ•°å¼ç»„ä»¶ï¼Œåœ¨è·¨å›¢é˜Ÿåä½œä¸­ä¹Ÿèƒ½å¾ˆå¥½é€‚é…ã€‚</p></div><table tabindex="0"><thead><tr><th>ç»´åº¦</th><th>Vue</th><th>React</th></tr></thead><tbody><tr><td><strong>è®¾è®¡ç†å¿µ</strong></td><td>æ¸è¿›å¼æ¡†æ¶ï¼ˆæ›´å…³æ³¨è§†å›¾ï¼‰</td><td>UI = f(state)ï¼Œå‡½æ•°å¼ç»„ä»¶ä¸ºä¸»</td></tr><tr><td><strong>è¯­æ³•</strong></td><td>æ¨¡æ¿è¯­æ³•ï¼ˆ<code>.vue</code> æ–‡ä»¶ï¼‰</td><td>JSXï¼ˆJavaScript + XMLï¼‰</td></tr><tr><td><strong>æ•°æ®å“åº”</strong></td><td>å“åº”å¼ç³»ç»Ÿï¼ˆProxyï¼‰</td><td>ä½¿ç”¨ <code>useState</code>ã€<code>useEffect</code> æ‰‹åŠ¨ç®¡ç†</td></tr><tr><td><strong>çŠ¶æ€ç®¡ç†</strong></td><td>Vuex / Pinia</td><td>Redux / Zustand / Recoil</td></tr><tr><td><strong>ç»„ä»¶é€šä¿¡</strong></td><td>props / emit / provide / inject</td><td>props / context / hooks</td></tr><tr><td><strong>å­¦ä¹ æ›²çº¿</strong></td><td>ç›¸å¯¹æ›´æ˜“ä¸Šæ‰‹</td><td>ç›¸å¯¹è‡ªç”±ä½†å¤æ‚</td></tr><tr><td><strong>æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µ</strong></td><td><code>watch</code>ã€<code>computed</code>ã€å“åº”å¼ä¾èµ–è¿½è¸ª</td><td>æ‰‹åŠ¨ä¾èµ–ç®¡ç†ã€memoã€useCallback</td></tr><tr><td><strong>ç”Ÿæ€</strong></td><td>é€‚åˆå¿«é€Ÿå¼€å‘ä¸­å°é¡¹ç›®</td><td>æ›´é€‚åˆå¤§å‹é¡¹ç›®å’Œä¼ä¸šçº§éœ€æ±‚</td></tr></tbody></table><h3 id="å¦‚ä½•å®ç°å¤§æ–‡ä»¶ä¸Šä¼ " tabindex="-1">å¦‚ä½•å®ç°å¤§æ–‡ä»¶ä¸Šä¼ ï¼Ÿ <a class="header-anchor" href="#å¦‚ä½•å®ç°å¤§æ–‡ä»¶ä¸Šä¼ " aria-label="Permalink to &quot;å¦‚ä½•å®ç°å¤§æ–‡ä»¶ä¸Šä¼ ï¼Ÿ&quot;">â€‹</a></h3><div class="warning custom-block"><p class="custom-block-title">æ¨¡æ¿</p><p>å¤§æ–‡ä»¶ä¸Šä¼ é€šå¸¸é‡‡ç”¨åˆ‡ç‰‡<code>ï¼ˆåˆ†ç‰‡ï¼‰ä¸Šä¼ </code> + <code>å¹¶å‘æ§åˆ¶</code> + <code>ç§’ä¼ æ ¡éªŒ</code>ç­‰æ–¹å¼æå‡æ€§èƒ½ä¸ç¨³å®šæ€§ï¼Œé¿å…ä¸€æ¬¡æ€§ä¸Šä¼ å¸¦æ¥çš„æµè§ˆå™¨å´©æºƒã€ç½‘ç»œä¸­æ–­ç­‰é—®é¢˜ã€‚</p><p>å…·ä½“æµç¨‹åŒ…æ‹¬ï¼šå°†æ–‡ä»¶æŒ‰å¤§å°åˆ‡ç‰‡ã€é€šè¿‡å”¯ä¸€æ ‡è¯†è®°å½•è¿›åº¦ã€æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œä¸Šä¼ å®Œæˆååœ¨æœåŠ¡ç«¯è¿›è¡Œåˆå¹¶ã€‚å¸¸ç»“åˆ <code>FileReader</code>ã€<code>Blob.slice</code>ã€<code>FormData</code> å’Œ <code>axios</code> å®ç°ï¼Œåç«¯è´Ÿè´£åˆå¹¶ä¸æ ¡éªŒã€‚</p></div><div class="info custom-block"><p class="custom-block-title">å®Œæ•´æµç¨‹</p><p><strong>å‰ç«¯</strong></p><p><strong>1.æ–‡ä»¶åˆ‡ç‰‡ï¼ˆchunkï¼‰</strong></p><p>å°†å¤§æ–‡ä»¶æŒ‰å›ºå®šå¤§å°åˆ‡å‰²ä¸ºå¤šä¸ªå°å—ï¼ˆchunkï¼‰ï¼Œä½¿ç”¨ <code>Blob.prototype.slice</code>ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createChunks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">chunkSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1024</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 10MB</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> chunks</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cur </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (cur </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> file.size) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    chunks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(file.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cur, cur </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunkSize));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cur </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunkSize;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunks;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>2. ç”Ÿæˆæ–‡ä»¶å”¯ä¸€æ ‡è¯†ï¼ˆhashï¼‰</strong></p><p>å¯ä½¿ç”¨ MD5 æˆ–æ–‡ä»¶å + å¤§å°ç­‰æ–¹å¼ï¼Œè¯†åˆ«æ˜¯å¦ä¸ºåŒä¸€æ–‡ä»¶ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fileHash</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}-\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">size</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>ï¼ˆæ›´ä¸¥è°¨æ–¹å¼æ˜¯ç”¨ Web Worker + spark-md5 å¯¹æ–‡ä»¶å†…å®¹åšå“ˆå¸Œï¼‰</p><p><strong>3. ä¸Šä¼ æ¯ä¸ª chunk</strong></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> uploadChunk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">chunk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">hash</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> formData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FormData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  formData.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;file&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, chunk);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  formData.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;filename&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">hash</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}-\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">index</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> axios.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/upload-chunk&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, formData);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>å¯ä»¥ä½¿ç”¨ <code>Promise.all</code> å¹¶å‘ä¸Šä¼ å¤šä¸ª chunkï¼Œä½†å»ºè®®é™åˆ¶å¹¶å‘é‡ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> MAX_CONCURRENT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç”¨ p-limit / concurrency æ§åˆ¶ä¸Šä¼ å¹¶å‘</span></span></code></pre></div><p><strong>4. é€šçŸ¥åç«¯åˆå¹¶æ–‡ä»¶</strong></p><p>æ‰€æœ‰ chunk ä¸Šä¼ æˆåŠŸåï¼Œå‘é€åˆå¹¶è¯·æ±‚ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> axios.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/merge&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  hash: fileHash,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  chunkTotal: chunks.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>5. æ–­ç‚¹ç»­ä¼ ä¸ç§’ä¼ ï¼ˆå¯é€‰ä¼˜åŒ–ï¼‰</strong></p><p>å‰ç«¯ä¸Šä¼ å‰è°ƒç”¨æ¥å£è·å–è¯¥ hash çš„ä¸Šä¼ è¿›åº¦ï¼Œå¦‚æœæŸäº› chunk å·²ä¸Šä¼ ï¼Œåˆ™è·³è¿‡è¿™äº›åˆ†ç‰‡ã€‚</p><p><strong>åç«¯</strong></p><ul><li>æ¥æ”¶æ¯ä¸ªåˆ†ç‰‡ä¿å­˜åˆ°ä¸´æ—¶ç›®å½•ï¼ˆå¦‚ <code>upload/tmp/æ–‡ä»¶ hash/åˆ†ç‰‡å</code>ï¼‰</li><li>åˆå¹¶åˆ†ç‰‡ï¼ˆæŒ‰åºå·æ‹¼æ¥ï¼‰</li><li>åˆ é™¤ä¸´æ—¶æ–‡ä»¶</li><li>æ ¡éªŒæ–‡ä»¶å®Œæ•´æ€§ï¼ˆå¦‚ MD5ï¼‰</li></ul></div><div class="info custom-block"><p class="custom-block-title">å¯é€‰è¿›é˜¶ä¼˜åŒ–</p><table tabindex="0"><thead><tr><th>ä¼˜åŒ–æ–¹å‘</th><th>æ–¹æ³•</th></tr></thead><tbody><tr><td>å¹¶å‘æ§åˆ¶</td><td>é™åˆ¶ä¸Šä¼ å¹¶å‘æ•°ï¼Œæé«˜ç¨³å®šæ€§</td></tr><tr><td>ç§’ä¼ </td><td>å‰ç«¯ç”Ÿæˆæ–‡ä»¶ hashï¼ŒæœåŠ¡å™¨åˆ¤æ–­æ˜¯å¦å·²å­˜åœ¨</td></tr><tr><td>æ–­ç‚¹ç»­ä¼ </td><td>å‰ç«¯è®°å½•ä¸Šä¼ è¿›åº¦ï¼›æœåŠ¡ç«¯ä¿å­˜å·²ä¼ åˆ†ç‰‡</td></tr><tr><td>ä¸Šä¼ è¿›åº¦</td><td>åˆ©ç”¨ <code>axios</code> çš„ <code>onUploadProgress</code></td></tr><tr><td>å¤§æ–‡ä»¶é¢„è§ˆ</td><td>ä¸Šä¼ å‰ç”Ÿæˆç¼©ç•¥å›¾ï¼ˆå›¾åƒï¼‰æˆ–è§†é¢‘é¦–å¸§</td></tr></tbody></table></div><h3 id="å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„æ‰‹æ®µ" tabindex="-1">å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„æ‰‹æ®µï¼Ÿ <a class="header-anchor" href="#å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„æ‰‹æ®µ" aria-label="Permalink to &quot;å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„æ‰‹æ®µï¼Ÿ&quot;">â€‹</a></h3><div class="warning custom-block"><p class="custom-block-title">æ¨¡æ¿</p><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä¼šä»åŠ è½½é€Ÿåº¦ã€æ¸²æŸ“æ•ˆç‡ã€ä»£ç ä½“ç§¯ã€è¯·æ±‚ä¼˜åŒ–ç­‰å¤šä¸ªæ–¹é¢è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼š</p><ol><li>é™æ€èµ„æºå‹ç¼©ï¼šä½¿ç”¨ Webpack/Gzip å‹ç¼© JS å’Œ CSS æ–‡ä»¶ï¼Œå‡å°åŒ…ä½“ç§¯ï¼›</li><li>æŒ‰éœ€åŠ è½½å’Œä»£ç åˆ†å‰²ï¼šä¾‹å¦‚è·¯ç”±æ‡’åŠ è½½ï¼ˆVue çš„ defineAsyncComponentï¼‰ã€Ant Design æŒ‰éœ€å¼•å…¥ï¼›</li><li>å›¾ç‰‡ä¼˜åŒ–ï¼šä½¿ç”¨ webp æ ¼å¼ã€å‹ç¼©å›¾åƒä½“ç§¯ã€æ‡’åŠ è½½å¤§å›¾ï¼›</li><li>ç¼“å­˜ç­–ç•¥ï¼šåˆç†é…ç½® HTTP ç¼“å­˜ã€ä½¿ç”¨ localStorage / IndexedDB ç¼“å­˜æ¥å£æ•°æ®ï¼›</li><li>DOM æ¸²æŸ“ä¼˜åŒ–ï¼šä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–é•¿åˆ—è¡¨ã€é¿å…ä¸å¿…è¦çš„ DOM æ›´æ–°ï¼›</li><li>è¯·æ±‚å±‚ä¼˜åŒ–ï¼šæ¥å£åˆå¹¶ã€CDN åŠ é€Ÿã€å‡å°‘ HTTP è¯·æ±‚æ¬¡æ•°ï¼›</li><li>æ„å»ºä¼˜åŒ–ï¼šTree-shaking å»é™¤æ— ç”¨ä»£ç ã€ä½¿ç”¨ ESBuild æˆ– Vite æå‡æ„å»ºé€Ÿåº¦ã€‚</li></ol></div><p><a href="/apecode/blog/performance-doc-feishu.html#é¦–å±åŠ è½½ä¼˜åŒ–">ğŸ‘‰ å¤§å‰ç«¯ - å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¹‹é£ä¹¦æ–‡æ¡£</a></p><table tabindex="0"><thead><tr><th>åˆ†ç±»</th><th>ä¼˜åŒ–æ‰‹æ®µï¼ˆå…³é”®ç‚¹ï¼‰</th></tr></thead><tbody><tr><td><strong>1. åŠ è½½ä¼˜åŒ–</strong></td><td>- èµ„æºå‹ç¼©ï¼ˆJS/CSS/å›¾ç‰‡ï¼‰<br>- èµ„æºæ‡’åŠ è½½ / é¢„åŠ è½½<br>- HTTP ç¼“å­˜ã€CDN åŠ é€Ÿ<br>- Gzip / Brotli å‹ç¼©</td></tr><tr><td><strong>2. æ¸²æŸ“ä¼˜åŒ–</strong></td><td>- å‡å°‘é‡æ’é‡ç»˜<br>- åˆç†ä½¿ç”¨ <code>will-change</code> / <code>transform</code><br>- è™šæ‹Ÿåˆ—è¡¨ã€èŠ‚æµå¤„ç†æ»šåŠ¨äº‹ä»¶</td></tr><tr><td><strong>3. è¯·æ±‚ä¼˜åŒ–</strong></td><td>- åˆç†æ‹†åˆ†æ¥å£ï¼ˆé¿å… N+1ï¼‰<br>- æ¥å£åˆå¹¶ / å»é‡<br>- ä½¿ç”¨ HTTP2/3 å¹¶å‘èƒ½åŠ›</td></tr><tr><td><strong>4. ä»£ç ä¼˜åŒ–</strong></td><td>- Tree shakingã€ä»£ç åˆ†å‰²<br>- å»¶è¿ŸåŠ è½½ï¼ˆå¦‚è·¯ç”±æ‡’åŠ è½½ï¼‰<br>- å‡å°‘ä¾èµ–åŒ…ä½“ç§¯ã€ä½¿ç”¨è½»é‡åº“</td></tr><tr><td><strong>5. æ•°æ®å¤„ç†ä¼˜åŒ–</strong></td><td>- é˜²æŠ–èŠ‚æµ<br>- ç¼“å­˜ï¼ˆlocalStorage / IndexedDBï¼‰<br>- è™šæ‹Ÿæ»šåŠ¨ã€æ‡’æ¸²æŸ“</td></tr><tr><td><strong>6. æ„å»ºä¼˜åŒ–</strong></td><td>- æŒ‰éœ€å¼•å…¥ç»„ä»¶<br>- å¤šçº¿ç¨‹æ„å»ºï¼ˆwebpack thread-loaderï¼‰<br>- å›¾ç‰‡è½¬ base64ã€å°å›¾é›ªç¢§å›¾</td></tr></tbody></table><h3 id="å¦‚ä½•çœ‹å¾…-cookieã€localstorageã€pinia" tabindex="-1">å¦‚ä½•çœ‹å¾… cookieã€localStorageã€piniaï¼Ÿ <a class="header-anchor" href="#å¦‚ä½•çœ‹å¾…-cookieã€localstorageã€pinia" aria-label="Permalink to &quot;å¦‚ä½•çœ‹å¾… cookieã€localStorageã€piniaï¼Ÿ&quot;">â€‹</a></h3><div class="warning custom-block"><p class="custom-block-title">æ¨¡æ¿</p><p>cookieã€localStorage å’Œ Pinia åˆ†åˆ«ä»£è¡¨äº†ä¸‰ä¸ªä¸åŒå±‚é¢çš„å­˜å‚¨å’ŒçŠ¶æ€ç®¡ç†æœºåˆ¶ï¼š</p><ul><li><code>cookie</code> æ˜¯ç”¨äºå‰åç«¯é€šä¿¡çš„ä¼ ç»Ÿæ–¹å¼ï¼Œé€‚åˆæœåŠ¡ç«¯èº«ä»½æ ¡éªŒï¼›</li><li><code>localStorage</code> æ˜¯å‰ç«¯æœ¬åœ°å­˜å‚¨è§£å†³æ–¹æ¡ˆï¼Œé€‚åˆå­˜å‚¨ç”¨æˆ·ä¸ªæ€§åŒ–é…ç½®ã€ç¼“å­˜æ•°æ®ï¼›</li><li><code>Pinia</code> åˆ™æ˜¯ Vue3 å®˜æ–¹æ¨èçš„çŠ¶æ€ç®¡ç†åº“ï¼Œé€‚åˆç»„ä»¶ä¹‹é—´å…±äº«å“åº”å¼çŠ¶æ€ã€‚</li></ul><p>å®é™…å¼€å‘ä¸­ï¼Œå®ƒä»¬å¾€å¾€æ˜¯é…åˆä½¿ç”¨çš„ï¼šä¾‹å¦‚ç”¨æˆ·ç™»å½•åï¼Œtoken ä¿å­˜åœ¨ cookie ä¸­ç”¨äºæ¥å£é‰´æƒï¼ŒåŒæ—¶ç”¨æˆ·ä¿¡æ¯ç”¨ Pinia ç®¡ç†ç”¨äºå“åº”å¼æ¸²æŸ“ï¼Œè€Œä¸€äº›æœ¬åœ°ç¼“å­˜ï¼ˆå¦‚ç”¨æˆ·åå¥½ã€è¯­è¨€é€‰æ‹©ï¼‰å¯ä»¥å­˜è¿› localStorageï¼Œé¡µé¢åˆ·æ–°åå¯è‡ªåŠ¨æ¢å¤ã€‚</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç™»å½•åï¼štoken å­˜ cookieï¼ˆç”¨äºæ¥å£æºå¸¦ï¼‰ï¼ŒuserInfo å­˜ Piniaï¼ŒuserTheme å­˜ localStorage</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// cookie å­˜ JWT</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.cookie </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;token=xxx; path=/; secure;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// localStorage å­˜ç¼“å­˜</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">localStorage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;theme&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dark&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// pinia å­˜çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">userStore.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setUserInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tester&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span></code></pre></div></div><table tabindex="0"><thead><tr><th style="text-align:center;">é¡¹ç›®</th><th style="text-align:center;">ç±»å‹</th><th style="text-align:center;">ç”¨é€”å®šä½</th></tr></thead><tbody><tr><td style="text-align:center;"><code>cookie</code></td><td style="text-align:center;">æµè§ˆå™¨åŸç”Ÿå­˜å‚¨</td><td style="text-align:center;">ä¸æœåŠ¡å™¨äº¤äº’ï¼ˆå¦‚ç™»å½•çŠ¶æ€ï¼‰</td></tr><tr><td style="text-align:center;"><code>localStorage</code></td><td style="text-align:center;">æœ¬åœ°æŒä¹…åŒ–å­˜å‚¨</td><td style="text-align:center;">å­˜å‚¨ç”¨æˆ·åå¥½ã€ç¼“å­˜æ•°æ®ç­‰</td></tr><tr><td style="text-align:center;"><code>Pinia</code></td><td style="text-align:center;">å‰ç«¯çŠ¶æ€ç®¡ç†å·¥å…·ï¼ˆVue3ï¼‰</td><td style="text-align:center;">ç®¡ç†ç»„ä»¶ä¹‹é—´å…±äº«çš„å“åº”å¼çŠ¶æ€</td></tr></tbody></table><ol><li>cookie</li></ol><p>âœ… ä¼˜ç‚¹ï¼š</p><ul><li>å¯ä»¥è‡ªåŠ¨éšè¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨ï¼ˆæºå¸¦èº«ä»½æ ‡è¯†ï¼‰</li><li>æ”¯æŒè®¾ç½®è¿‡æœŸæ—¶é—´ã€ä½œç”¨åŸŸã€HttpOnlyã€å®‰å…¨ç­–ç•¥ç­‰</li></ul><p>âš ï¸ ç¼ºç‚¹ï¼š</p><ul><li>å®¹é‡é™åˆ¶ï¼ˆçº¦ 4KBï¼‰</li><li>æ¯æ¬¡è¯·æ±‚è‡ªåŠ¨æºå¸¦ï¼Œå½±å“æ€§èƒ½</li><li>å®‰å…¨æ€§å·®ï¼ˆæ˜“è¢« XSS è®¿é—®ï¼Œé™¤éè®¾ç½® HttpOnlyï¼‰</li></ul><blockquote><p>ğŸ’¡ é€‚åˆï¼šç™»å½•çŠ¶æ€ä¿å­˜ã€è·¨é¡µé¢ç™»å½•éªŒè¯ã€ä¸åç«¯äº¤äº’çš„å°å‹æ•°æ®</p></blockquote><ol start="2"><li>localStorage</li></ol><p>âœ… ä¼˜ç‚¹ï¼š</p><ul><li>å­˜å‚¨å®¹é‡å¤§ï¼ˆçº¦ 5MBï¼‰</li><li>æŒä¹…åŒ–å¼ºï¼ˆé™¤éä¸»åŠ¨æ¸…é™¤ï¼Œä¸ä¼šå¤±æ•ˆï¼‰</li><li>ç®€å•æ˜“ç”¨ï¼Œé”®å€¼å¯¹ç»“æ„</li></ul><p>âš ï¸ ç¼ºç‚¹ï¼š</p><ul><li>åªèƒ½å­˜å‚¨å­—ç¬¦ä¸²</li><li>æ— æ³•å“åº”å¼æ›´æ–°ï¼ˆä¸é€‚åˆå¤šç»„ä»¶å…±äº«çŠ¶æ€ï¼‰</li><li>ä¸ä¼šè‡ªåŠ¨åŒæ­¥åˆ°æœåŠ¡å™¨ï¼ˆä»…å‰ç«¯å¯è®¿é—®ï¼‰</li></ul><blockquote><p>ğŸ’¡ é€‚åˆï¼šç”¨æˆ·ä¸»é¢˜åå¥½ã€ç¼“å­˜æœç´¢è®°å½•ã€å‡å°‘æ¥å£è¯·æ±‚</p></blockquote><ol start="3"><li>Piniaï¼ˆæˆ– Vuexï¼‰</li></ol><p>âœ… ä¼˜ç‚¹ï¼š</p><ul><li>å“åº”å¼ã€ç»„ä»¶å…±äº«çŠ¶æ€ç®€å•é«˜æ•ˆ</li><li>æ’ä»¶æœºåˆ¶ã€æ¨¡å—åŒ–ã€æŒä¹…åŒ–æ”¯æŒï¼ˆæ­é…æ’ä»¶ï¼‰</li><li>ä¸ Vue3 æ·±åº¦é›†æˆï¼Œæ”¯æŒ TS ç±»å‹æ¨å¯¼</li></ul><p>âš ï¸ ç¼ºç‚¹ï¼š</p><ul><li>å­¦ä¹ æ›²çº¿ç¨é«˜ï¼ˆå¯¹åˆå­¦è€…ï¼‰</li><li>é¡µé¢åˆ·æ–°åçŠ¶æ€ä¼šé‡ç½®ï¼ˆéœ€æ‰‹åŠ¨ç»“åˆ localStorageï¼‰</li></ul><blockquote><p>ğŸ’¡ é€‚åˆï¼šç»„ä»¶é—´çŠ¶æ€å…±äº«ã€å¤æ‚é¡µé¢é€»è¾‘ï¼ˆå¦‚è´­ç‰©è½¦ã€ç”¨æˆ·ä¿¡æ¯ç®¡ç†ï¼‰</p></blockquote><h3 id="å¦‚ä½•é˜²å¾¡-xssã€csrf-æ”»å‡»" tabindex="-1">å¦‚ä½•é˜²å¾¡ XSSã€CSRF æ”»å‡»ï¼Ÿ <a class="header-anchor" href="#å¦‚ä½•é˜²å¾¡-xssã€csrf-æ”»å‡»" aria-label="Permalink to &quot;å¦‚ä½•é˜²å¾¡ XSSã€CSRF æ”»å‡»ï¼Ÿ&quot;">â€‹</a></h3><div class="warning custom-block"><p class="custom-block-title">æ¨¡æ¿</p><p>æˆ‘äº†è§£ Web å¸¸è§æ”»å‡»å¦‚ XSS å’Œ CSRFï¼Œæ—¥å¸¸å¼€å‘ä¸­æˆ‘ä¸»è¦é€šè¿‡ä»¥ä¸‹æ–¹å¼é˜²æŠ¤ï¼š</p><ul><li>å¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œè½¬ä¹‰å’Œæ ¡éªŒï¼Œé˜²æ­¢æ³¨å…¥ XSSï¼›</li><li>è®¾ç½® CSP ç­–ç•¥ ç¦æ­¢å†…è”è„šæœ¬æ‰§è¡Œï¼›</li><li>å¯¹äº Cookie è®¾ç½® HttpOnly + SameSite å±æ€§ï¼›</li><li>æ‰€æœ‰æ•æ„Ÿæ“ä½œæ¥å£ä½¿ç”¨ CSRF Token æœºåˆ¶ è¿›è¡ŒéªŒè¯ï¼›</li><li>å¯Œæ–‡æœ¬ç±»è¾“å…¥æˆ‘ä¼šä½¿ç”¨ DOMPurify ç­‰åº“è¿›è¡Œè¿‡æ»¤å¤„ç†ã€‚</li></ul><p>åœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘ä¹Ÿä¼šé…åˆåç«¯è®¾ç½®å“åº”å¤´å’Œæ¥å£æƒé™ï¼Œç¡®ä¿å‰åç«¯ååŒé˜²æŠ¤ã€‚</p></div><h4 id="xss" tabindex="-1">XSS <a class="header-anchor" href="#xss" aria-label="Permalink to &quot;XSS&quot;">â€‹</a></h4><p>è·¨ç«™è„šæœ¬æ”»å‡» Cross-Site Scriptingï¼ŒXSS æ˜¯æ”»å‡»è€…åœ¨ç½‘é¡µä¸­æ³¨å…¥æ¶æ„è„šæœ¬ä»£ç ï¼Œè¯±å¯¼ç”¨æˆ·æ‰§è¡Œï¼Œä»è€Œçªƒå–ç”¨æˆ·ä¿¡æ¯ï¼ˆå¦‚ Cookieï¼‰ã€åŠ«æŒä¼šè¯ã€æ§åˆ¶é¡µé¢è¡Œä¸ºç­‰ã€‚</p><p>ä¸¾ä¾‹ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&lt;script&gt;alert(&#39;xss&#39;)&lt;/script&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span></code></pre></div><p>é˜²å¾¡æ‰‹æ®µï¼š</p><table tabindex="0"><thead><tr><th>ç±»å‹</th><th>é˜²å¾¡æ–¹å¼</th></tr></thead><tbody><tr><td><strong>1. è¾“å…¥è¿‡æ»¤</strong></td><td>æ°¸è¿œä¸è¦ç›¸ä¿¡ç”¨æˆ·è¾“å…¥ï¼Œä½¿ç”¨ç™½åå•é™åˆ¶å¯è¾“å…¥çš„å­—ç¬¦</td></tr><tr><td><strong>2. è¾“å‡ºç¼–ç </strong></td><td>å¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œè½¬ä¹‰ï¼ˆå¦‚å°† <code>&lt;</code> è½¬æˆ <code>&amp;lt;</code>ï¼‰ï¼Œé˜²æ­¢æ³¨å…¥è„šæœ¬</td></tr><tr><td><strong>3. CSP ç­–ç•¥</strong></td><td>è®¾ç½®å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆContent Security Policyï¼‰ï¼Œç¦æ­¢é¡µé¢æ‰§è¡Œå†…è” JS ç­‰</td></tr><tr><td><strong>4. httpOnly</strong></td><td>å°† Cookie è®¾ç½®ä¸º <code>HttpOnly</code>ï¼Œé˜²æ­¢è¢« JS è¯»å–ï¼Œä¿æŠ¤ token</td></tr><tr><td><strong>5. ç¬¬ä¸‰æ–¹åº“é˜²æŠ¤</strong></td><td>ä½¿ç”¨ DOMPurify ç­‰åº“å¯¹å¯Œæ–‡æœ¬ã€HTML å†…å®¹åšæ¸…æ´—</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">å¦‚ä½•ä½¿ç”¨ CSP é˜² XSSï¼Ÿ</p><p>è®¾ç½® CSP å“åº”å¤´ï¼š</p><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Content-Security-Policy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> default-src &#39;self&#39;; script-src &#39;self&#39;;</span></span></code></pre></div><p>æ•ˆæœï¼š</p><ul><li>ç¦æ­¢åŠ è½½ç¬¬ä¸‰æ–¹è„šæœ¬</li><li>ç¦æ­¢ evalã€inline script ç­‰</li></ul></div><h4 id="csrf" tabindex="-1">CSRF <a class="header-anchor" href="#csrf" aria-label="Permalink to &quot;CSRF&quot;">â€‹</a></h4><p>è·¨ç«™è¯·æ±‚ä¼ªé€  Cross-Site Request Forgeryï¼Œåˆ©ç”¨ç”¨æˆ·å·²ç™»å½•çŠ¶æ€ï¼Œé€šè¿‡ä¼ªé€ è¯·æ±‚æ¬ºéª—æœåŠ¡å™¨æ‰§è¡Œæœªæˆæƒçš„æ“ä½œã€‚</p><p>ä¸¾ä¾‹ï¼š</p><p>ç”¨æˆ·ç™»å½•é“¶è¡Œç½‘ç«™åï¼Œè®¿é—®æ¶æ„é¡µé¢ï¼Œé¡µé¢å·å·å‘èµ·ï¼š</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://bank.com/transfer?to=bad&amp;amount=1000&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span></code></pre></div><p>æµè§ˆå™¨è‡ªåŠ¨å¸¦ä¸Šäº† Cookieï¼Œä»è€Œå®Œæˆè½¬è´¦ã€‚</p><p>é˜²å¾¡æ‰‹æ®µï¼š</p><table tabindex="0"><thead><tr><th>é˜²å¾¡æ–¹å¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>1. Token éªŒè¯</strong></td><td>æ¯æ¬¡è¯·æ±‚å¸¦ä¸Š CSRF tokenï¼Œåç«¯æ ¡éªŒæ˜¯å¦æœ‰æ•ˆ</td></tr><tr><td><strong>2. SameSite Cookie</strong></td><td>è®¾ç½® Cookie å±æ€§ï¼š<code>SameSite=Strict/Lax</code>ï¼Œé˜²æ­¢ç¬¬ä¸‰æ–¹ç«™ç‚¹æºå¸¦ Cookie</td></tr><tr><td><strong>3. Referer æ ¡éªŒ</strong></td><td>åç«¯æ£€æŸ¥è¯·æ±‚å¤´ä¸­ <code>Referer</code> æ˜¯å¦æ¥è‡ªæœ¬ç«™</td></tr><tr><td><strong>4. ä½¿ç”¨åŒé‡ Cookie</strong></td><td>è®¾ç½® csrfToken å­˜åœ¨ Cookie + è¯·æ±‚å¤´ä¸€å¹¶æäº¤ï¼Œå‰åç«¯éƒ½æ ¡éªŒ</td></tr><tr><td><strong>5. POST æ›¿ä»£ GET</strong></td><td>å…³é”®æ“ä½œä¸ä½¿ç”¨ GETï¼Œé¿å…é€šè¿‡ <code>&lt;img&gt;</code> ä¼ªé€ </td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">httpOnly å’Œ SameSite ä½œç”¨æ€»ç»“</p><table tabindex="0"><thead><tr><th>å±æ€§</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>HttpOnly</code></td><td>JS æ— æ³•è®¿é—®æ­¤ Cookieï¼Œé˜²æ­¢ XSS çªƒå–</td></tr><tr><td><code>SameSite</code></td><td>æ§åˆ¶ Cookie è·¨ç«™è¯·æ±‚æ˜¯å¦å‘é€ï¼Œé˜²æ­¢ CSRF</td></tr></tbody></table></div><h3 id="gzip-æ²¡æœ‰ç”Ÿæ•ˆ-å¦‚ä½•æ’æŸ¥" tabindex="-1">GZip æ²¡æœ‰ç”Ÿæ•ˆï¼Œå¦‚ä½•æ’æŸ¥ï¼Ÿ <a class="header-anchor" href="#gzip-æ²¡æœ‰ç”Ÿæ•ˆ-å¦‚ä½•æ’æŸ¥" aria-label="Permalink to &quot;GZip æ²¡æœ‰ç”Ÿæ•ˆï¼Œå¦‚ä½•æ’æŸ¥ï¼Ÿ&quot;">â€‹</a></h3><blockquote><p>GZip å‹ç¼©æ˜¯å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„é‡è¦æ‰‹æ®µ</p></blockquote><ol><li>å®¢æˆ·ç«¯è¯·æ±‚å¤´æ£€æŸ¥</li></ol><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Accept-Encoding: gzip, deflate, br</span></span></code></pre></div><ol start="2"><li>æœåŠ¡å™¨ç«¯é…ç½®æ’æŸ¥</li></ol><p><code>æœåŠ¡å™¨ä½¿ç”¨ nginx æ¼”ç¤º</code></p><p>2.1 æ£€æŸ¥ nginx é…ç½®</p><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gzip </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;                          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ˜¯å¦å¼€å¯GZip</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gzip_types </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">text/html text/css ...; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ˜¯å¦åŒ…å«text/htmlç±»å‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gzip_vary </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;                     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ˜¯å¦å…è®¸ä»£ç†æœåŠ¡å™¨æ ¹æ®è¯·æ±‚å¤´é€‰æ‹©å‹ç¼©</span></span></code></pre></div><p>2.2 ç¡®ä¿æœåŠ¡å™¨æ”¯æŒ GZip é™æ€æ–‡ä»¶</p><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gzip_static </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯ç”¨é™æ€å‹ç¼©æ–‡ä»¶</span></span></code></pre></div><p>ç¡®è®¤æœåŠ¡å™¨èƒ½è®¿é—®åˆ°.html.gz æ–‡ä»¶ï¼ˆå¦‚è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼‰ã€‚</p><ol start="3"><li>Webpack æ„å»ºäº§ç‰©æ£€æŸ¥</li></ol><p>æŸ¥çœ‹ Webpack è¾“å‡ºç›®å½•ï¼ˆå¦‚ distï¼‰ï¼Œç¡®è®¤æ˜¯å¦å­˜åœ¨ index.html.gz æ–‡ä»¶ã€‚</p><ol start="4"><li>ç¼“å­˜æ£€æŸ¥</li></ol><p>4.1 æµè§ˆå™¨ç¼“å­˜æ£€æŸ¥ 4.2 æœåŠ¡å™¨ç¼“å­˜æ£€æŸ¥ CDN</p><h2 id="é˜¶æ®µå…«" tabindex="-1">é˜¶æ®µå…« <a class="header-anchor" href="#é˜¶æ®µå…«" aria-label="Permalink to &quot;é˜¶æ®µå…«&quot;">â€‹</a></h2><h3 id="url-åˆ°é¡µé¢åŠ è½½çš„è¿‡ç¨‹" tabindex="-1">URL åˆ°é¡µé¢åŠ è½½çš„è¿‡ç¨‹ <a class="header-anchor" href="#url-åˆ°é¡µé¢åŠ è½½çš„è¿‡ç¨‹" aria-label="Permalink to &quot;URL åˆ°é¡µé¢åŠ è½½çš„è¿‡ç¨‹&quot;">â€‹</a></h3><p><a href="/apecode/essays/browser.html#ä»è¾“å…¥-url-åˆ°é¡µé¢åŠ è½½çš„å…¨è¿‡ç¨‹">ğŸ‘‰ ä»è¾“å…¥-url-åˆ°é¡µé¢åŠ è½½çš„å…¨è¿‡ç¨‹</a></p><h2 id="é˜¶æ®µå" tabindex="-1">é˜¶æ®µå <a class="header-anchor" href="#é˜¶æ®µå" aria-label="Permalink to &quot;é˜¶æ®µå&quot;">â€‹</a></h2><h3 id="ç›’æ¨¡å‹" tabindex="-1">ç›’æ¨¡å‹ï¼Ÿ <a class="header-anchor" href="#ç›’æ¨¡å‹" aria-label="Permalink to &quot;ç›’æ¨¡å‹ï¼Ÿ&quot;">â€‹</a></h3><p><a href="/apecode/blog/css-box-sizing.html">ğŸ‘‰ æ ‡å‡†ç›’æ¨¡å‹ä¸æ€ªå¼‚ç›’æ¨¡å‹çš„åŒºåˆ«</a></p><h3 id="positions-å±æ€§å€¼" tabindex="-1">positions å±æ€§å€¼ï¼Ÿ <a class="header-anchor" href="#positions-å±æ€§å€¼" aria-label="Permalink to &quot;positions å±æ€§å€¼ï¼Ÿ&quot;">â€‹</a></h3><p><a href="/apecode/blog/css-position.html">ğŸ‘‰ CSS Position å®šä½å¸ƒå±€</a></p><h3 id="this-æŒ‡å‘" tabindex="-1">this æŒ‡å‘ï¼Ÿ <a class="header-anchor" href="#this-æŒ‡å‘" aria-label="Permalink to &quot;this æŒ‡å‘ï¼Ÿ&quot;">â€‹</a></h3><p><a href="/apecode/essays/javascript.html#this-çš„äº”ç§æƒ…å†µ">ğŸ‘‰ å…«è‚¡æ–‡ - JavaScript - this çš„äº”ç§æƒ…å†µ</a></p><h3 id="bfc" tabindex="-1">BFC ? <a class="header-anchor" href="#bfc" aria-label="Permalink to &quot;BFC ?&quot;">â€‹</a></h3><p><a href="/apecode/essays/css.html#bfc-å—çº§æ ¼å¼ä¸Šä¸‹æ–‡">ğŸ‘‰ BFC å—çº§æ ¼å¼ä¸Šä¸‹æ–‡</a></p><h3 id="vue-çš„åŒå‘æ•°æ®ç»‘å®š" tabindex="-1">vue çš„åŒå‘æ•°æ®ç»‘å®šï¼Ÿ <a class="header-anchor" href="#vue-çš„åŒå‘æ•°æ®ç»‘å®š" aria-label="Permalink to &quot;vue çš„åŒå‘æ•°æ®ç»‘å®šï¼Ÿ&quot;">â€‹</a></h3><p><a href="/apecode/blog/review-2025.html#vue-çš„æ•°æ®ç»‘å®šè¿æ¥æ–¹å¼">ğŸ‘‰ vue çš„æ•°æ®ç»‘å®šè¿æ¥æ–¹å¼</a></p><h3 id="ref-å’Œ-reactive-çš„åŒºåˆ«-å¦‚ä½•å®ç°çš„" tabindex="-1">ref å’Œ reactive çš„åŒºåˆ«ï¼Ÿå¦‚ä½•å®ç°çš„ï¼Ÿ <a class="header-anchor" href="#ref-å’Œ-reactive-çš„åŒºåˆ«-å¦‚ä½•å®ç°çš„" aria-label="Permalink to &quot;ref å’Œ reactive çš„åŒºåˆ«ï¼Ÿå¦‚ä½•å®ç°çš„ï¼Ÿ&quot;">â€‹</a></h3><div class="warning custom-block"><p class="custom-block-title">è­¦å‘Š</p><p><code>ref</code> å’Œ <code>reactive</code> éƒ½æ˜¯ Vue 3 ä¸­ç”¨äºåˆ›å»ºå“åº”å¼æ•°æ®çš„ APIã€‚åŒºåˆ«åœ¨äºï¼š</p><ul><li><code>ref</code> ä¸»è¦ç”¨äºåŸºæœ¬ç±»å‹æˆ– DOM å¼•ç”¨ï¼Œè¿”å›ä¸€ä¸ªå¸¦ .value å±æ€§çš„å¯¹è±¡ï¼›</li><li><code>reactive</code> ç”¨äºå¯¹è±¡å’Œæ•°ç»„ï¼ŒåŸºäº Proxy å®ç°æ·±åº¦å“åº”å¼ã€‚</li></ul><p>åœ¨å®ç°ä¸Šï¼Œ<code>ref</code> æ˜¯é€šè¿‡ getter/setter å¯¹ <code>.value</code> åšå“åº”è¿½è¸ªï¼Œè€Œ <code>reactive</code> æ˜¯é€šè¿‡ Proxy æ‹¦æˆªæ‰€æœ‰å±æ€§è¯»å†™ã€‚ä¸¤è€…éƒ½ä¼šè‡ªåŠ¨è¿›è¡Œä¾èµ–æ”¶é›†ä¸è§¦å‘æ›´æ–°ã€‚</p><p>åœ¨æ¨¡æ¿ä¸­ Vue ä¼šè‡ªåŠ¨è§£åŒ… <code>ref</code>ï¼Œæ‰€ä»¥ä½¿ç”¨ä¸Šä¹Ÿå¾ˆç›´è§‚ã€‚</p><hr><p>Vue çš„å“åº”å¼ç³»ç»Ÿé‡‡ç”¨äº†ã€Œä¾èµ–æ”¶é›†ï¼ˆtrackï¼‰ + æ´¾å‘æ›´æ–°ï¼ˆtriggerï¼‰ã€çš„æœºåˆ¶ã€‚æ— è®ºæ˜¯ ref è¿˜æ˜¯ reactiveï¼Œéƒ½æ˜¯åŸºäº effect å‡½æ•°ä¸ä¾èµ– Map å®ç°çš„ç²¾ç»†åŒ–æ›´æ–°ã€‚</p></div><h4 id="åŒºåˆ«" tabindex="-1">åŒºåˆ« <a class="header-anchor" href="#åŒºåˆ«" aria-label="Permalink to &quot;åŒºåˆ«&quot;">â€‹</a></h4><table tabindex="0"><thead><tr><th>å¯¹æ¯”é¡¹</th><th><code>ref()</code></th><th><code>reactive()</code></th></tr></thead><tbody><tr><td><strong>ç”¨æ³•</strong></td><td>ç”¨äºåŸºæœ¬ç±»å‹ &amp; DOM å¼•ç”¨</td><td>ç”¨äºå¯¹è±¡ç±»å‹ï¼ˆæ•°ç»„ã€å¯¹è±¡ç­‰ï¼‰</td></tr><tr><td><strong>è¿”å›å€¼ç±»å‹</strong></td><td>å¯¹è±¡ï¼š<code>{ value: xxx }</code></td><td>ä»£ç†åçš„å“åº”å¼å¯¹è±¡ï¼ˆProxyï¼‰</td></tr><tr><td><strong>è§£åŒ…è¡Œä¸º</strong></td><td>æ¨¡æ¿ä¸­è‡ªåŠ¨ <code>.value</code> è§£åŒ…</td><td>æ¨¡æ¿ä¸­è‡ªåŠ¨è®¿é—®å±æ€§ï¼Œæ— éœ€è§£åŒ…</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”ã€DOMã€å¼‚æ­¥ç­‰</td><td>å¤æ‚å¯¹è±¡ã€çŠ¶æ€ç®¡ç†</td></tr><tr><td><strong>åº•å±‚å®ç°</strong></td><td>ä¾èµ– <code>RefImpl</code> å¯¹è±¡ + getter/setter</td><td>ä¾èµ– Proxy æ‹¦æˆªå±æ€§è®¿é—®</td></tr></tbody></table><p>ref</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { ref } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(count.value); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è®¿é—®éœ€è¦ .value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">count.value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>reactive</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { reactive } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> reactive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Zan&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, age: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">25</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user.name); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç›´æ¥è®¿é—®å±æ€§</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">user.age</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h4 id="åŸç†" tabindex="-1">åŸç† <a class="header-anchor" href="#åŸç†" aria-label="Permalink to &quot;åŸç†&quot;">â€‹</a></h4><ul><li>ref() çš„å®ç°ï¼ˆåŸºäºå¯¹è±¡åŒ…è£…ï¼‰</li></ul><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    __v_isRef: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    get</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      track</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;value&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¾èµ–æ”¶é›†</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    set</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">newVal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> newVal;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      trigger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;value&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ´¾å‘æ›´æ–°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><blockquote><p>ref æœ¬è´¨æ˜¯æŠŠåŸºæœ¬ç±»å‹å€¼åŒ…è£¹åœ¨ä¸€ä¸ªå¸¦æœ‰ .value getter/setter çš„å¯¹è±¡ä¸­ã€‚</p></blockquote><ul><li>reactive() çš„å®ç°ï¼ˆåŸºäº Proxyï¼‰</li></ul><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> reactive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(target, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      track</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(target, key); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¾èµ–æ”¶é›†</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Reflect.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(target, key);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Reflect.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(target, key, value);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      trigger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(target, key); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ´¾å‘æ›´æ–°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><blockquote><p>æ ¸å¿ƒé€»è¾‘æ˜¯å¯¹å¯¹è±¡å±æ€§çš„è¯»å–å’Œä¿®æ”¹è¿›è¡Œæ‹¦æˆªï¼Œä»è€Œå®ç°ä¾èµ–æ”¶é›†å’Œæ›´æ–°è§¦å‘ã€‚</p></blockquote><details class="details custom-block"><summary>å‡è®¾æˆ‘ç»™ ref ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œvue æ˜¯æ€ä¹ˆè¿›è¡Œå¤„ç†çš„ï¼Ÿ</summary><p><code>å½“ä½ ç»™ ref() ä¼ å…¥ä¸€ä¸ªå¯¹è±¡æ—¶ï¼ŒVue ä¼šè‡ªåŠ¨è°ƒç”¨ reactive() å°†å®ƒå˜æˆå“åº”å¼å¯¹è±¡ï¼Œç„¶ååŒ…è£¹åœ¨ .value é‡Œè¿”å›ã€‚</code></p><p>Vue çš„æºç ï¼ˆç®€åŒ–ï¼‰ä¸­æ˜¯è¿™ä¹ˆå¤„ç†çš„ï¼š</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">rawValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å¦‚æœæ˜¯å¯¹è±¡ï¼Œå…ˆè½¬æˆ reactive</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> isObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rawValue) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> reactive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rawValue) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rawValue;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    __v_isRef: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    get</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      track</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;value&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    set</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">newVal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> isObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(newVal) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> reactive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(newVal) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> newVal;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      trigger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;value&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> obj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Zan&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj.value.name); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âœ… æ˜¯å“åº”å¼çš„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.value.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ZanXiao&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âœ… ä¼šè§¦å‘æ›´æ–°</span></span></code></pre></div><p>è¿™æ—¶å€™ä½ ç”¨çš„æ˜¯ <code>.value.name</code>ï¼Œè€Œä¸æ˜¯ç›´æ¥ <code>obj.name</code>ï¼Œå› ä¸ºå®ƒè¿˜æ˜¯åŒ…è£¹åœ¨ <code>ref</code> å¯¹è±¡é‡Œé¢ã€‚</p></details><h3 id="computed-å’Œ-watch-çš„åŒºåˆ«" tabindex="-1">computed å’Œ watch çš„åŒºåˆ«ï¼Ÿ <a class="header-anchor" href="#computed-å’Œ-watch-çš„åŒºåˆ«" aria-label="Permalink to &quot;computed å’Œ watch çš„åŒºåˆ«ï¼Ÿ&quot;">â€‹</a></h3><div class="warning custom-block"><p class="custom-block-title">è­¦å‘Š</p><p>å®ƒä»¬éƒ½æ˜¯ç”¨æ¥<strong>å“åº”æ•°æ®å˜åŒ–ã€æ‰§è¡Œå‰¯ä½œç”¨</strong>çš„å·¥å…·ï¼Œä½†åœ¨ä½¿ç”¨æ–¹å¼ã€ä¾èµ–æ”¶é›†æœºåˆ¶ã€è§¦å‘æ—¶æœºç­‰æ–¹é¢æœ‰æ˜æ˜¾åŒºåˆ«ã€‚</p><p><code>computed</code> å’Œ <code>watch</code> éƒ½æ˜¯ Vue ä¸­çš„å“åº”å¼å·¥å…·ï¼Œä½†é€‚ç”¨åœºæ™¯ä¸åŒï¼š</p><ul><li><code>computed</code> é€‚åˆç”¨æ¥è®¡ç®—æ´¾ç”ŸçŠ¶æ€ï¼Œæœ‰ç¼“å­˜ç‰¹æ€§ï¼Œä¾èµ–æ²¡å˜å°±ä¸ä¼šé‡æ–°è®¡ç®—ï¼›</li><li><code>watch</code> æ›´é€‚åˆç›‘å¬æ•°æ®å˜åŒ–åæ‰§è¡Œå‰¯ä½œç”¨ï¼Œå¦‚å‘é€è¯·æ±‚ã€æ‰‹åŠ¨å¤„ç†é€»è¾‘ï¼›</li></ul><p>æ¯”å¦‚åœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘ç”¨ <code>computed</code> ç”Ÿæˆè§†å›¾æ‰€éœ€çš„å±•ç¤ºæ•°æ®ï¼Œè€Œç”¨ <code>watch</code> æ¥ç›‘å¬ç”¨æˆ·è¾“å…¥è¿›è¡Œæ¥å£è¯·æ±‚é˜²æŠ–å¤„ç†ã€‚</p><hr><ul><li>computedï¼š <ul><li>åŸºäº effect() åŒ…è£…</li><li>æœ‰ä¾èµ–è¿½è¸ªï¼ˆtrackï¼‰ä¸ç¼“å­˜æœºåˆ¶</li><li>å®ç°äº†æ‡’æ‰§è¡Œ + è‡ªåŠ¨æ›´æ–°</li></ul></li><li>watchï¼š <ul><li>æœ¬è´¨æ˜¯æ‰‹åŠ¨æ³¨å†Œä¸€ä¸ªå‰¯ä½œç”¨å‡½æ•°</li><li>æ²¡æœ‰ç¼“å­˜</li><li>å¯é…ç½® deepã€immediate ç­‰é€‰é¡¹</li></ul></li></ul></div><table tabindex="0"><thead><tr><th>å¯¹æ¯”ç‚¹</th><th><code>computed</code></th><th><code>watch</code></th></tr></thead><tbody><tr><td><strong>ç”¨æ³•ç›®çš„</strong></td><td>è®¡ç®—å±æ€§ï¼ˆå€¼ï¼‰</td><td>ç›‘å¬å“åº”å¼æ•°æ®çš„å˜åŒ–ï¼Œæ‰§è¡Œå‰¯ä½œç”¨ï¼ˆå›è°ƒï¼‰</td></tr><tr><td><strong>è¿”å›å€¼</strong></td><td>è¿”å›ä¸€ä¸ªå“åº”å¼â€œå€¼â€</td><td>è¿”å› <code>undefined</code>ï¼Œæ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°</td></tr><tr><td><strong>æ˜¯å¦ç¼“å­˜</strong></td><td>âœ… ç¼“å­˜ï¼ˆä¾èµ–æœªå˜åˆ™ä¸é‡æ–°è®¡ç®—ï¼‰</td><td>âŒ ä¸ç¼“å­˜ï¼Œè§¦å‘ä¸€æ¬¡æ‰§è¡Œä¸€æ¬¡</td></tr><tr><td><strong>é€‚åˆåœºæ™¯</strong></td><td>åŸºäºå¤šä¸ªçŠ¶æ€æ´¾ç”Ÿå‡ºä¸€ä¸ªâ€œæ–°çŠ¶æ€â€</td><td>æ‰§è¡Œå¼‚æ­¥è¯·æ±‚ / watch è·¯ç”±å˜åŒ– / æ‰‹åŠ¨ç›‘å¬æ•°æ®</td></tr><tr><td><strong>é»˜è®¤è¡Œä¸º</strong></td><td>åˆå§‹åŒ–æ—¶ä¸æ‰§è¡Œï¼Œåªæœ‰ä¾èµ–å˜æ‰é‡æ–°è®¡ç®—</td><td>é»˜è®¤ä¸ç«‹å³æ‰§è¡Œï¼ˆå¯é…ç½®ï¼‰ï¼Œä¾èµ–å˜åŒ–è§¦å‘å‡½æ•°</td></tr><tr><td><strong>æ˜¯å¦æ‰‹åŠ¨æ§åˆ¶</strong></td><td>âŒ å®Œå…¨ä¾èµ– Vue ä¾èµ–æ”¶é›†</td><td>âœ… å¯è‡ªå®šä¹‰ç›‘å¬é¡¹å’Œé€‰é¡¹ï¼ˆdeepã€immediateï¼‰</td></tr></tbody></table><p>ç¤ºä¾‹ï¼š</p><p><code>computed</code> è®¡ç®—ä¸€ä¸ªæ´¾ç”ŸçŠ¶æ€</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> firstName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Zan&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> lastName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Xiao&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fullName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> computed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">firstName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">lastName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><ul><li>ä¼˜ç‚¹ï¼šfirstName æˆ– lastName æ”¹å˜æ—¶è‡ªåŠ¨æ›´æ–° fullName</li><li>âœ… å…·æœ‰ç¼“å­˜åŠŸèƒ½</li></ul><p><code>watch</code> ç›‘å¬æ•°æ®å˜åŒ–åšå‰¯ä½œç”¨æ“ä½œ</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç›‘å¬ä¸€ä¸ªå€¼</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">watch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fullName, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">newVal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">oldVal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Full name changed:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, newVal);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç›‘å¬å¤šä¸ªå€¼</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">watch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([firstName, lastName], ([</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">newFirst</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">newLast</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`New name: \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">newFirst</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">newLast</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="watch-å’Œ-watcheffect-çš„åŒºåˆ«" tabindex="-1">watch å’Œ watchEffect çš„åŒºåˆ«ï¼Ÿ <a class="header-anchor" href="#watch-å’Œ-watcheffect-çš„åŒºåˆ«" aria-label="Permalink to &quot;watch å’Œ watchEffect çš„åŒºåˆ«ï¼Ÿ&quot;">â€‹</a></h3><div class="warning custom-block"><p class="custom-block-title">è­¦å‘Š</p><p>watch å’Œ watchEffect éƒ½ç”¨äºç›‘å¬å“åº”å¼æ•°æ®å˜åŒ–ï¼Œä½†æœ‰æ ¸å¿ƒå·®å¼‚ï¼š</p><ul><li>watch æ˜¯<strong>æ˜¾å¼ç›‘å¬</strong>ï¼Œé€‚åˆç›‘å¬ç‰¹å®šå˜é‡ã€éœ€è¦æ—§å€¼çš„åœºæ™¯ï¼ˆå¦‚ç›‘å¬æŸä¸ªå­—æ®µå˜åŠ¨æ—¶è°ƒæ¥å£ï¼‰ï¼›</li><li>watchEffect æ˜¯<strong>è‡ªåŠ¨ä¾èµ–æ”¶é›†</strong>ï¼Œæ›´é€‚åˆå¿«é€Ÿå£°æ˜å“åº”å¼å‰¯ä½œç”¨ï¼Œæ¯”å¦‚åœ¨ç»„ä»¶åˆå§‹åŒ–æ—¶å¤„ç†é€»è¾‘ï¼›</li></ul><p>é¡¹ç›®ä¸­æˆ‘ä¸€èˆ¬ç”¨ watchEffect å¤„ç† UI åˆå§‹åŒ–é€»è¾‘ï¼Œç”¨ watch å¤„ç†ç²¾ç¡®æ§åˆ¶çš„æ¥å£è¯·æ±‚åœºæ™¯ã€‚</p><p>ä½¿ç”¨åœºæ™¯ï¼š</p><table tabindex="0"><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹å¼</th></tr></thead><tbody><tr><td>ç›‘å¬å•ä¸ªå˜é‡å˜åŒ–å¹¶è·å–æ—§å€¼</td><td>âœ… <code>watch</code></td></tr><tr><td>éœ€è¦ç›‘å¬å¤šä¸ªå“åº”å¼æ•°æ®</td><td>âœ… <code>watch</code></td></tr><tr><td>å¿«é€Ÿå“åº”æ‰€æœ‰ç›¸å…³æ•°æ®å˜åŒ–æ‰§è¡Œå‰¯ä½œç”¨</td><td>âœ… <code>watchEffect</code></td></tr><tr><td>æ¨¡æ‹Ÿç”Ÿå‘½å‘¨æœŸï¼Œå¦‚è¯·æ±‚åˆå§‹æ•°æ®</td><td>âœ… <code>watchEffect</code></td></tr><tr><td>æ·±åº¦ç›‘å¬åµŒå¥—å¯¹è±¡å±æ€§</td><td>âœ… <code>watch + deep: true</code></td></tr></tbody></table></div><table tabindex="0"><thead><tr><th>å¯¹æ¯”é¡¹</th><th><code>watch</code></th><th><code>watchEffect</code></th></tr></thead><tbody><tr><td><strong>ä¾èµ–æŒ‡å®šæ–¹å¼</strong></td><td>æ˜¾å¼ä¼ å…¥ï¼šå¦‚ <code>ref</code>ã€<code>reactive</code>ã€getter å‡½æ•°</td><td>è‡ªåŠ¨æ”¶é›†ä¾èµ–ï¼ˆåªè¦ä½ åœ¨ effect ä¸­è®¿é—®å®ƒï¼‰</td></tr><tr><td><strong>æ˜¯å¦ç«‹å³æ‰§è¡Œ</strong></td><td>é»˜è®¤ä¸æ‰§è¡Œï¼Œéœ€ <code>immediate: true</code> é…ç½®</td><td>ä¼šç«‹å³æ‰§è¡Œä¸€æ¬¡ï¼ˆç»„ä»¶æŒ‚è½½å‰ï¼‰</td></tr><tr><td><strong>å‰¯ä½œç”¨å‡½æ•°</strong></td><td>æ˜ç¡®å‚æ•° <code>(newVal, oldVal)</code></td><td>æ— éœ€å‚æ•°ï¼Œè‡ªåŠ¨è¿è¡Œ</td></tr><tr><td><strong>é€‚åˆåœºæ™¯</strong></td><td>ç²¾ç¡®æ§åˆ¶ç›‘å¬å“ªä¸ªå˜é‡ï¼Œé€‚åˆç›‘å¬å•ä¸ª/å¤šä¸ªæ•°æ®</td><td>ç®€æ´å£°æ˜å¼å‰¯ä½œç”¨ï¼Œä¾èµ–ä¼šè‡ªåŠ¨è·Ÿè¸ªï¼Œé€‚åˆé€»è¾‘åˆå§‹åŒ–ç­‰</td></tr><tr><td><strong>æ”¯æŒ deep</strong></td><td>âœ… å¯ä»¥é…ç½® <code>{ deep: true }</code></td><td>âŒ ä¸æ”¯æŒ deep é…ç½®ï¼ˆä½†ä¼šè·Ÿè¸ªæ‰€æœ‰è®¿é—®çš„å±æ€§ï¼‰</td></tr><tr><td><strong>è°ƒè¯•/å¯æ§æ€§</strong></td><td>âœ… æ›´å¯æ§</td><td>âŒ æ›´è‡ªåŠ¨ï¼Œçµæ´»ä½†å¯èƒ½æ›´â€œéšå¼â€</td></tr></tbody></table><p>ç¤ºä¾‹ï¼š</p><p><code>watch</code> ç›‘å¬æŒ‡å®šæ•°æ®</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">watch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  count,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">newVal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">oldVal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;count changed:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, newVal, oldVal);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { immediate: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, deep: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><ul><li>æ˜ç¡®æŒ‡å®šè¦ç›‘å¬å“ªä¸ªå€¼</li><li>æœ‰ newValã€oldVal å‚æ•°</li><li>å¯é…ç½® deep / immediate</li></ul><p><code>watchEffect</code> è‡ªåŠ¨ä¾èµ–æ”¶é›†</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">watchEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;count is:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, count.value);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><ul><li>è‡ªåŠ¨è¿½è¸ª <code>count.value</code></li><li>æ²¡æœ‰ newVal / oldVal</li><li>ä¸€è¿›é¡µé¢å°±æ‰§è¡Œä¸€æ¬¡</li></ul><h3 id="ä½ä»£ç å¯è§†åŒ–å®ç°æ€è·¯" tabindex="-1">ä½ä»£ç å¯è§†åŒ–å®ç°æ€è·¯ï¼Ÿ <a class="header-anchor" href="#ä½ä»£ç å¯è§†åŒ–å®ç°æ€è·¯" aria-label="Permalink to &quot;ä½ä»£ç å¯è§†åŒ–å®ç°æ€è·¯ï¼Ÿ&quot;">â€‹</a></h3><p>å¯ä»¥åˆ†ä¸º å‰ç«¯å¯è§†åŒ–ç¼–è¾‘å™¨ + ä¸­åå°æ¸²æŸ“å¼•æ“ ä¸¤å¤§éƒ¨åˆ†ï¼š</p><ol><li>æ‹–æ‹½æ­å»º â†’</li><li>ç»“æ„æ•°æ®ä¿å­˜ â†’</li><li>æ¸²æŸ“å¼•æ“è§£æç”Ÿæˆé¡µé¢</li></ol><div class="warning custom-block"><p class="custom-block-title">è­¦å‘Š</p><p>ä½ä»£ç å¯è§†åŒ–å¹³å°çš„æ ¸å¿ƒæ€è·¯æ˜¯ï¼š</p><ul><li>æ„å»ºä¸€ä¸ªåŸºäºæ‹–æ‹½çš„é¡µé¢ç¼–è¾‘å™¨ï¼Œé€šè¿‡ç»„ä»¶é…ç½®ç”Ÿæˆé¡µé¢ DSLï¼›</li><li>å°† DSL ç»“æ„è½¬åŒ–ä¸ºçœŸå®å¯è¿è¡Œçš„é¡µé¢ï¼ˆVue/React æ¸²æŸ“ï¼‰ï¼›</li><li>å¹¶æ”¯æŒå±æ€§é…ç½®ã€äº‹ä»¶ç¼–æ’ã€æ•°æ®ç»‘å®šç­‰åŠŸèƒ½ï¼›</li></ul><p>æŠ€æœ¯ä¸Šé€šå¸¸ä¼šåŸºäº Vue + å¯è§†åŒ–åº“ï¼ˆå¦‚ VueDraggableï¼‰ï¼Œé…åˆ JSON Schema ç®¡ç†ç»„ä»¶ç»“æ„ï¼Œå¹¶ä½¿ç”¨åŠ¨æ€ç»„ä»¶å®ç°æ¸²æŸ“ã€‚ä¹Ÿå¯ä»¥æ‰©å±•ä¸ºæ”¯æŒæ•°æ®è”åŠ¨ã€æƒé™æ§åˆ¶ã€å‘å¸ƒç³»ç»Ÿç­‰ã€‚</p></div><p>â‘  æ‹–æ‹½ç»„ä»¶ç³»ç»Ÿï¼ˆå¯è§†åŒ–ç¼–è¾‘å™¨ï¼‰</p><ul><li>ä½¿ç”¨ Vue æˆ– React å®ç°ä¸€ä¸ªç”»å¸ƒ + ç»„ä»¶åº“</li><li>æ¯ä¸ªç»„ä»¶æ˜¯ä¸€ä¸ªé…ç½®é©±åŠ¨çš„æ¨¡å—åŒ–ç»„ä»¶ï¼ˆå°è£…å¥½æ ·å¼å’Œé€»è¾‘ï¼‰</li><li>æ‹–æ‹½æ—¶ç”Ÿæˆä¸€ä¸ªç»„ä»¶æ ‘ç»“æ„ï¼ˆDSLï¼‰</li></ul><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Button&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;props&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æäº¤&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;color&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;primary&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;style&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;marginTop&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;20px&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><blockquote><p>è¿™å°±æ˜¯ä½ä»£ç å¹³å°çš„â€œé¡µé¢ DSLï¼ˆDomain Specific Languageï¼‰â€</p></blockquote><p>â‘¡ å±æ€§é…ç½®é¢æ¿</p><ul><li>æ‹–åˆ°ç”»å¸ƒçš„ç»„ä»¶è¢«é€‰ä¸­åï¼Œå³ä¾§å‡ºç°å±æ€§ç¼–è¾‘å™¨</li><li>ä½¿ç”¨ el-input, el-switch, el-color-picker æ§åˆ¶ç»„ä»¶å±æ€§</li><li>ä¿®æ”¹åå®æ—¶æ›´æ–°ç»„ä»¶é…ç½®ï¼ˆåŒå‘ç»‘å®šï¼‰</li></ul><p>â‘¢ é¡µé¢ DSL ç»“æ„ç®¡ç†</p><ul><li>å½“å‰é¡µé¢çš„ç»„ä»¶ç»“æ„ä»¥æ ‘å½¢æ–¹å¼å­˜åœ¨å†…å­˜ä¸­ / å­˜å…¥æ•°æ®åº“</li><li>æ¯æ¬¡æ‹–åŠ¨/ä¿®æ”¹å±æ€§éƒ½åŒæ­¥ä¿®æ”¹ DSL</li><li>å¯ä»¥å¯¼å‡ºä¸º JSON å­˜å‚¨ï¼Œä¹Ÿå¯å¯¼å‡ºä»£ç ï¼ˆå¦‚ Vue / JSXï¼‰</li></ul><p>â‘£ å®æ—¶é¢„è§ˆ &amp; æ¸²æŸ“å¼•æ“</p><ul><li>å°†ç»„ä»¶ DSL è½¬æ¢æˆçœŸå®çš„ Vue / React ç»„ä»¶</li><li>æ¸²æŸ“æ–¹å¼å¯ç”¨åŠ¨æ€ render()ã€æˆ– Vue.compile()ï¼ˆSSR å¯ç”¨æœåŠ¡ç«¯æ³¨å†Œï¼‰</li></ul><p>â‘¤ æ‹“å±•æ”¯æŒï¼ˆè¿›é˜¶ï¼‰</p><ul><li>æ•°æ®æºç»‘å®šï¼šæ”¯æŒæ¥å…¥æ¥å£ï¼ˆRESTfulã€GraphQLï¼‰ã€mock æ•°æ®</li><li>äº‹ä»¶ç³»ç»Ÿï¼šç»„ä»¶æ”¯æŒ onClick â†’ triggerAction ç­‰è¡Œä¸ºæŠ½è±¡</li><li>æƒé™æ§åˆ¶ï¼šå¯æ§åˆ¶é¡µé¢ã€å­—æ®µã€ç»„ä»¶çš„æƒé™é€»è¾‘</li><li>ç‰ˆæœ¬å‘å¸ƒï¼šå¯å°† DSL æ‰“åŒ…ã€å‘å¸ƒä¸ºç‹¬ç«‹é¡µé¢æˆ– iframe æ¥å…¥</li></ul><h3 id="ç§»åŠ¨ç«¯é€‚é…æ–¹æ¡ˆ" tabindex="-1">ç§»åŠ¨ç«¯é€‚é…æ–¹æ¡ˆï¼Ÿ <a class="header-anchor" href="#ç§»åŠ¨ç«¯é€‚é…æ–¹æ¡ˆ" aria-label="Permalink to &quot;ç§»åŠ¨ç«¯é€‚é…æ–¹æ¡ˆï¼Ÿ&quot;">â€‹</a></h3><div class="warning custom-block"><p class="custom-block-title">è­¦å‘Š</p><p>ç§»åŠ¨ç«¯é€‚é…å¸¸è§æœ‰ rem æ–¹æ¡ˆã€vw æ–¹æ¡ˆå’Œåª’ä½“æŸ¥è¯¢ç­‰ï¼Œå…¶ä¸­æˆ‘æœ€å¸¸ç”¨çš„æ˜¯ rem + lib-flexible çš„æ–¹å¼ï¼š</p><ul><li>é€šè¿‡è®¾ç½®æ ¹å…ƒç´  font-sizeï¼Œå®ç°ç­‰æ¯”ç¼©æ”¾ï¼›</li><li>é¡µé¢ä¸­ç”¨ rem å•ä½å†™å¸ƒå±€ï¼Œé…åˆ postcss-pxtorem æ’ä»¶è‡ªåŠ¨è½¬æ¢ï¼›</li></ul><p>é¡¹ç›®ä¸­ä¹Ÿä¼šåœ¨ç‰¹å®šåœºæ™¯ï¼ˆå¦‚å…¨å±è½®æ’­ã€åµŒå…¥ iframeï¼‰ä½¿ç”¨ vw å•ä½é€‚é…ã€‚</p><p>å¯¹äºæ›´å¤æ‚çš„å“åº”å¼éœ€æ±‚ï¼Œè¿˜å¯ä»¥ç»“åˆåª’ä½“æŸ¥è¯¢ã€Tailwind CSS çš„æ–­ç‚¹ç±»è¿›è¡Œæ›´ç²¾ç»†çš„æ§åˆ¶ã€‚</p></div><table tabindex="0"><thead><tr><th>æ–¹æ¡ˆåç§°</th><th>åŸç†è¯´æ˜</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>1. ç™¾åˆ†æ¯”å¸ƒå±€</td><td>ä½¿ç”¨ <code>%</code> è®¡ç®—å®½é«˜ã€marginã€padding ç­‰</td><td>ç®€å•è‡ªé€‚åº”é¡µé¢</td></tr><tr><td>2. rem + flexible.js</td><td>æ ¹æ®å±å¹•å®½åº¦åŠ¨æ€è®¾ç½® <code>&lt;html&gt;</code> çš„ font-size</td><td>å¸¸è§äº Vue2 + H5 é¡¹ç›®</td></tr><tr><td>3. vw / vh</td><td>ä½¿ç”¨è§†å£å•ä½è®¾ç½®å…ƒç´ å®½åº¦ / é«˜åº¦</td><td>å…¨å±å¸ƒå±€ã€bannerã€å®¹å™¨ç­‰</td></tr><tr><td>4. åª’ä½“æŸ¥è¯¢ï¼ˆmediaï¼‰</td><td>é’ˆå¯¹ä¸åŒå±å¹•å®½åº¦è®¾ç½®ä¸åŒæ ·å¼</td><td>ç²¾ç»†æ§åˆ¶å¤šä¸ªæ–­ç‚¹çš„æ ·å¼</td></tr><tr><td>5. PostCSS + px2rem</td><td>å¼€å‘å†™ pxï¼Œæ„å»ºæ—¶è‡ªåŠ¨è½¬æˆ rem</td><td>ç»“åˆæ–¹æ¡ˆ 2ï¼Œä¸€èµ·ä½¿ç”¨</td></tr><tr><td>6. Vant + lib-flexible</td><td>Vant UI é»˜è®¤ rem æ–¹æ¡ˆï¼Œéœ€è¦é…åˆ flexible.js</td><td>ä½¿ç”¨ Vant UI æ—¶çš„é»˜è®¤æ¨è</td></tr><tr><td>7. Tailwind CSS</td><td>åŸå­åŒ–æ ·å¼ + media query å†…ç½®</td><td>Vue3 / React é¡¹ç›®å¼ºæ¨è</td></tr></tbody></table><h2 id="é˜¶æ®µåä¸€" tabindex="-1">é˜¶æ®µåä¸€ <a class="header-anchor" href="#é˜¶æ®µåä¸€" aria-label="Permalink to &quot;é˜¶æ®µåä¸€&quot;">â€‹</a></h2><h3 id="webpack-å’Œ-vite-çš„åŒºåˆ«" tabindex="-1">webpack å’Œ vite çš„åŒºåˆ«ï¼Ÿ <a class="header-anchor" href="#webpack-å’Œ-vite-çš„åŒºåˆ«" aria-label="Permalink to &quot;webpack å’Œ vite çš„åŒºåˆ«ï¼Ÿ&quot;">â€‹</a></h3><div class="warning custom-block"><p class="custom-block-title">è­¦å‘Š</p><p>Webpack æ˜¯ä¼ ç»Ÿçš„æ‰“åŒ…æ„å»ºå·¥å…·ï¼Œé‡‡ç”¨çš„æ˜¯â€œæ‰“åŒ…æ„å»ºå†è¿è¡Œâ€çš„æœºåˆ¶ï¼Œè€Œ Vite æ˜¯æ–°ä¸€ä»£æ„å»ºå·¥å…·ï¼Œå¼€å‘æ—¶åˆ©ç”¨æµè§ˆå™¨åŸç”Ÿ ESModule å®ç°â€œæŒ‰éœ€åŠ è½½å³ç¼–è¯‘â€ï¼Œæå¤§æå‡äº†å¯åŠ¨é€Ÿåº¦å’Œçƒ­æ›´æ–°æ€§èƒ½ã€‚åœ¨æˆ‘å¼€å‘ Vue3 æˆ– React é¡¹ç›®æ—¶ï¼Œé€šå¸¸ä¼šé€‰æ‹© Viteï¼Œå®ƒé…ç½®æ›´ç®€å•ã€æ€§èƒ½æ›´å¥½ã€‚Webpack ä¾ç„¶é€‚ç”¨äºä¸€äº›éœ€è¦å¤æ‚æ„å»ºé€»è¾‘çš„é¡¹ç›®æˆ–å·²æœ‰ä»£ç è¿ç§»åœºæ™¯ã€‚</p></div><table tabindex="0"><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>Webpack</th><th>Vite</th></tr></thead><tbody><tr><td><strong>å¼€å‘æ¨¡å¼</strong></td><td>å…ˆæ„å»ºæ‰€æœ‰æ¨¡å—ï¼Œå¯åŠ¨æ…¢</td><td>æŒ‰éœ€åŠ è½½æ¨¡å—ï¼Œå¯åŠ¨æå¿«</td></tr><tr><td><strong>æ„å»ºåŸç†</strong></td><td>åŸºäº JavaScript æ‰“åŒ…ï¼ˆBundleï¼‰</td><td>å¼€å‘æ—¶åŸºäºåŸç”Ÿ ES æ¨¡å— + æ„å»ºæ—¶ Rollup æ‰“åŒ…</td></tr><tr><td><strong>çƒ­æ›´æ–°é€Ÿåº¦ï¼ˆHMRï¼‰</strong></td><td>æ…¢ï¼šå…¨éƒ¨é‡æ–°ç¼–è¯‘æ¨¡å—</td><td>å¿«ï¼šæŒ‰æ¨¡å—çƒ­æ›´æ–°ï¼ˆæ¨¡å—çº§ HMRï¼‰</td></tr><tr><td><strong>æ‰“åŒ…é€Ÿåº¦</strong></td><td>æ„å»ºæ…¢ï¼Œå°¤å…¶æ˜¯å¤§å‹é¡¹ç›®</td><td>æ„å»ºå¿«ï¼ŒåŸºäº Rollupï¼Œä¸”æœ‰ç°ä»£ä¼˜åŒ–ç­–ç•¥</td></tr><tr><td><strong>æ’ä»¶ç”Ÿæ€</strong></td><td>æˆç†Ÿï¼Œæ’ä»¶æ•°é‡å¤š</td><td>æ’ä»¶æ•°é‡é€æ­¥å®Œå–„ï¼Œå¤§å¤šå…¼å®¹ Rollup æ’ä»¶</td></tr><tr><td><strong>é…ç½®å¤æ‚åº¦</strong></td><td>é…ç½®å¤æ‚ï¼ˆwebpack.config.jsï¼‰</td><td>é…ç½®ç®€å•ï¼ˆvite.config.tsï¼‰ï¼Œçº¦å®šä¼˜äºé…ç½®</td></tr><tr><td><strong>é»˜è®¤æ”¯æŒè¯­æ³•</strong></td><td>éœ€é…ç½® loader</td><td>åŸç”Ÿæ”¯æŒ TSã€JSXã€CSS æ¨¡å—ç­‰ç°ä»£è¯­æ³•</td></tr><tr><td><strong>æ„å»ºäº§ç‰©</strong></td><td>ä¸€æ•´åŒ…è¾“å‡º</td><td>Rollup ä¼˜åŒ–æ„å»ºäº§ç‰©ï¼ŒæŒ‰éœ€æ‹†åŒ…ä¼˜åŒ–</td></tr><tr><td><strong>é™æ€èµ„æºæ”¯æŒ</strong></td><td>éœ€é…ç½® file-loader/url-loader</td><td>é»˜è®¤æ”¯æŒï¼Œè‡ªåŠ¨å¤„ç†</td></tr><tr><td><strong>é€‚åˆåœºæ™¯</strong></td><td>å¤§å‹å¤æ‚é¡¹ç›®ï¼Œæˆ–å·²æœ‰ Webpack é¡¹ç›®</td><td>ä¸­å°å‹æ–°é¡¹ç›®ã€Vue3/React é¡¹ç›®ï¼Œå¼€å‘æ•ˆç‡ä¼˜å…ˆ</td></tr></tbody></table><p>æœ¬è´¨åŒºåˆ«ï¼š</p><ul><li>Webpack <ul><li>æ„å»ºå‰ï¼šæŠŠæ‰€æœ‰ä¾èµ–æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundle æ–‡ä»¶ï¼Œç„¶åå¯åŠ¨ dev server</li><li>å³ä½¿ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶ï¼Œä¹Ÿè¦é‡æ–°æ‰“åŒ…å¤§éƒ¨åˆ†æ¨¡å—</li></ul></li><li>Vite <ul><li>å¼€å‘æ—¶ï¼šä½¿ç”¨æµè§ˆå™¨åŸç”Ÿçš„ ES Module æœºåˆ¶ï¼Œåªåœ¨è®¿é—®æ¨¡å—æ—¶å†ç¼–è¯‘ï¼Œä¿®æ”¹å“ªä¸ªç¼–è¯‘å“ªä¸ª</li><li>æ„å»ºæ—¶ï¼šåŸºäº Rollup è¿›è¡Œä¼˜åŒ–æ‰“åŒ…ï¼Œäº§ç‰©æ›´è½»</li></ul></li></ul>`,291))])}const b=t(d,[["render",r]]);export{F as __pageData,b as default};
