---
layout: doc
date: "2025-05-22"
---

# 包管理器比较

JavaScript/TypeScript 生态中的`包管理或运行环境`有 `npm`、`pnpm`、`yarn`、`bun`、`deno`，但它们的定位、优势和使用场景不同。下面是详细对比。

## npm

全称 Node Package Manager，NodeJS `默认的`包管理器。

✅ 优势：

- 广泛兼容：几乎所有 Node 项目都支持 npm。
- 社区庞大：npm 仓库是目前`最大的` JS 包生态。
- 内置工具：自 npm v7 起支持 Workspaces（多包管理）、自动安装 peerDependencies。
- 稳定成熟：`官方维护`，最少坑。

🚫 劣势：

- 安装速度慢（相较于 pnpm、yarn、bun）。
- 默认会`重复下载`相同依赖（不如 pnpm 节省空间）。

## pnpm

全称 Package Manager，性能优化版本的 npm，使用了`硬链接方式`来提升速度与节省磁盘空间。

✅ 优势：

- 节省磁盘空间：通过`内容寻址 + 硬链接`，共享重复依赖。
- 安装速度快：比 npm 快很多。
- 严格依赖管理：防止 `“幽灵依赖”`（依赖未声明却可访问）。
- 支持 `monorepo/workspace`：非常适合大型项目。

🚫 劣势：

- 某些老旧项目或工具不兼容 pnpm 的结构（例如：非扁平 node_modules）。

## yarn

由 Facebook 开发，用于解决 npm 的一致性问题。现在有 Yarn v1 和 Yarn v3（Berry）。

✅ 优势（v1）：

- 安装速度快（缓存机制好）。
- 离线安装支持。
- Yarn.lock 更稳定。

✅ 优势（v3 Berry）：

- Plug'n'Play（PnP）支持：无需 node_modules。
- 原生支持 monorepo（通过 yarn workspaces）。
- 模块解析更快。

🚫 劣势：

- Yarn v3 学习曲线略陡，很多社区包未完全兼容。
- PnP 模式兼容性不如传统 node_modules。

## bun

一个集成了 JS 运行时 + 打包器 + 包管理器的新工具，由 Zig 编写。

✅ 优势：

- 超快速度：安装、构建、启动速度`几乎最快`。
- 内置功能强：
  - 内建 TypeScript 支持。
  - 内建打包器（替代 Webpack、esbuild）。
  - 内建测试框架。
- 兼容 npm 包。

🚫 劣势

- 生态尚不成熟，有些包可能不兼容。
- 部分 Node API 支持还在完善中。
- 更新频繁，偶有 breaking change。

## deno

Node.js 作者推出的`新一代` JS/TS 运行时，目标是“更安全、更现代”。

✅ 优势：

- 原生支持 TypeScript。
- 安全沙箱机制（默认无访问文件/网络权限）。
- 内置模块，无需大量三方包。
- 使用 URL 导入依赖（不依赖 node_modules）。
- 内置工具链：打包、测试、格式化、Lint 等。

🚫 劣势：

- 不兼容 npm（直到 Deno 1.28 才开始部分兼容）。
- 生态较小，很多 Node 包不可直接用。
- 思维模式不同，上手成本高。

## 总结

| 工具        | 安装速度  | 空间效率           | Monorepo | TypeScript  | 稳定性      | 新项目推荐     |
| ----------- | --------- | ------------------ | -------- | ----------- | ----------- | -------------- |
| **npm**     | 中        | 中                 | ✔️ (v7+) | ❌ (需配置) | ✅ 稳定     | 一般           |
| **pnpm**    | ✅ 快     | ✅ 高效            | ✅ 优秀  | ❌ (需配置) | ✅ 稳定     | ✅ 推荐        |
| **yarn v1** | 快        | 中等               | ✅       | ❌ (需配置) | ✅          | 一般           |
| **yarn v3** | ✅ 快     | ✅ 高效            | ✅ 强大  | ❌ (需配置) | ⚠️ 需学习   | ✅（大型项目） |
| **bun**     | 🚀 非常快 | ✅ 高效            | ✅ 支持  | ✅ 内建     | ⚠️ 新生态   | ✅ 前沿项目    |
| **deno**    | ✅ 快     | ✅ 无 node_modules | ✅ 内建  | ✅ 内建     | ⚠️ 兼容性差 | ⚠️ 有探索成本  |

:::tip

如你关注开发效率与磁盘空间节省：推荐 pnpm。
如你想尝试前沿、极致性能工具：可以试试 Bun。
如你构建现代后端或工具链：可以探索 Deno。
如你想保持稳定通用：继续用 npm 也没问题。

:::
