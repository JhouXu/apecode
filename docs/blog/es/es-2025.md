---
layout: doc
date: "2025-12-18"
author: "ä¿Šå°èµ"
---

# ECMAScript 2025

ECMAScript 2025ï¼ˆç®€ç§° ES2025ï¼‰æ˜¯ JavaScript æ ‡å‡†çš„ç¬¬ 16 ä¸ªç‰ˆæœ¬ã€‚æœ¬æ¬¡æ›´æ–°å¼•å…¥äº†å¤šé¡¹é‡é‡çº§ç‰¹æ€§ï¼Œç‰¹åˆ«æ˜¯å¯¹è¿­ä»£å™¨ï¼ˆIteratorsï¼‰å’Œé›†åˆï¼ˆSetsï¼‰çš„å¢å¼ºï¼Œæå¤§åœ°æå‡äº†åŸç”Ÿ JavaScript å¤„ç†å¤æ‚æ•°æ®çš„èƒ½åŠ›ã€‚

ä»¥ä¸‹æ˜¯ ES2025 ä¸­æœ€å€¼å¾—å…³æ³¨çš„æ–°ç‰¹æ€§ï¼š

## 1. è¿­ä»£å™¨åŠ©æ‰‹ (Iterator Helpers)

åœ¨æ­¤ä¹‹å‰ï¼Œå¦‚æœä½ æƒ³å¯¹ `Map.keys()` æˆ– `Set.values()` è¿”å›çš„è¿­ä»£å™¨è¿›è¡Œ map æˆ– filter æ“ä½œï¼Œå¿…é¡»å…ˆå°†å…¶è½¬æ¢ä¸ºæ•°ç»„ã€‚ES2025 ä¸ºè¿­ä»£å™¨åŸå‹ç›´æ¥æ·»åŠ äº†è¿™äº›å¸¸ç”¨æ–¹æ³•ã€‚

```javascript
const myMap = new Map([
  ["a", 1],
  ["b", 2],
  ["c", 3],
]);

// ç°åœ¨å¯ä»¥ç›´æ¥åœ¨è¿­ä»£å™¨ä¸Šä½¿ç”¨ map, filter, take ç­‰æ–¹æ³•
const result = myMap
  .keys()
  .filter((key) => key !== "b")
  .map((key) => key.toUpperCase())
  .toArray(); // å¿«é€Ÿè½¬å›æ•°ç»„

console.log(result); // ["A", "C"]

// å…¶ä»–è¾…åŠ©æ–¹æ³•
const firstTwo = myMap.values().take(2); // åªå–å‰ä¸¤ä¸ª
```

## 2. æ–°çš„ Set æ–¹æ³• (New Set Methods)

ES2025 ä¸º `Set` å¯¹è±¡å¢åŠ äº†å¤šä¸ªæ•°å­¦æ„ä¹‰ä¸Šçš„é›†åˆæ“ä½œæ–¹æ³•ï¼Œä¸å†éœ€è¦æ‰‹åŠ¨ç¼–å†™å¾ªç¯æˆ–ä¾èµ– Lodash ç­‰åº“ã€‚

```javascript
const setA = new Set([1, 2, 3]);
const setB = new Set([3, 4, 5]);

// å¹¶é›† (Union)
const union = setA.union(setB); // Set {1, 2, 3, 4, 5}

// äº¤é›† (Intersection)
const intersection = setA.intersection(setB); // Set {3}

// å·®é›† (Difference)
const difference = setA.difference(setB); // Set {1, 2}

// å¯¹ç§°å·®é›† (Symmetric Difference)
const symDiff = setA.symmetricDifference(setB); // Set {1, 2, 4, 5}

// åˆ¤æ–­å…³ç³»
console.log(setA.isSubsetOf(setB)); // false
console.log(setA.isDisjointFrom(setB)); // false (å› ä¸ºæœ‰äº¤é›† 3)
```

## 3. å¯¼å…¥å±æ€§ (Import Attributes)

è¿™æ˜¯å¯¹æ¨¡å—å¯¼å…¥ç³»ç»Ÿçš„å¢å¼ºã€‚åœ¨ä¹‹å‰çš„ææ¡ˆä¸­æ›¾è¢«ç§°ä¸º "Import Assertions"ï¼Œç°åœ¨æ­£å¼å®šåä¸º "Import Attributes"ï¼Œå¹¶ä½¿ç”¨ `with` å…³é”®å­—ã€‚å®ƒå…è®¸åœ¨å¯¼å…¥æ¨¡å—æ—¶æºå¸¦å…ƒæ•°æ®ï¼Œæœ€å…¸å‹çš„åœºæ™¯æ˜¯å¯¼å…¥ JSON æ¨¡å—ã€‚

```javascript
// å¯¼å…¥ JSON æ¨¡å—ï¼Œå¹¶æ˜ç¡®æŒ‡å®šç±»å‹
import config from './config.json' with { type: 'json' };

console.log(config.appName);

// åŠ¨æ€å¯¼å…¥åŒæ ·æ”¯æŒ
const messages = await import('./messages.json', {
  with: { type: 'json' }
});
```

## 4. Promise.try

`Promise.try` æ˜¯ä¸€ä¸ªç®€å•ä½†å®ç”¨çš„è¯­æ³•ç³–ã€‚å®ƒå…è®¸ä½ è¿è¡Œä¸€ä¸ªå‡½æ•°ï¼ˆæ— è®ºå®ƒæ˜¯åŒæ­¥çš„è¿˜æ˜¯å¼‚æ­¥çš„ï¼‰ï¼Œå¹¶å°†ç»“æœç»Ÿä¸€åŒ…è£…åœ¨ Promise ä¸­ã€‚è¿™åœ¨å¤„ç†å¯èƒ½æŠ›å‡ºåŒæ­¥é”™è¯¯çš„å‡½æ•°æ—¶éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥ç»Ÿä¸€ç”¨ `.catch`() æ•è·ã€‚

```javascript
function maybeThrows(id) {
  if (id < 0) throw new Error("Invalid ID");
  return `User-${id}`;
}

// ä»¥å‰éœ€è¦è¿™æ ·å¤„ç†åŒæ­¥é”™è¯¯
// try { ... } catch (e) { ... }

// ç°åœ¨å¯ä»¥ç»Ÿä¸€å¤„ç†
Promise.try(() => maybeThrows(-1))
  .then((res) => console.log(res))
  .catch((err) => console.error("æ•è·åˆ°é”™è¯¯:", err.message));
```

## 5. æ­£åˆ™è¡¨è¾¾å¼ä¿®é¥°ç¬¦ (RegExp Modifiers)

ES2025 å…è®¸åœ¨æ­£åˆ™è¡¨è¾¾å¼å†…éƒ¨å¼€å¯æˆ–å…³é—­å±€éƒ¨ä¿®é¥°ç¬¦ï¼ˆå¦‚ `i`, `m`, `s`ï¼‰ã€‚è¿™ä½¿å¾—åœ¨åŒä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œä¸åŒéƒ¨åˆ†å¯ä»¥æœ‰ä¸åŒçš„åŒ¹é…è¡Œä¸ºã€‚

```javascript
// åœ¨æ‹¬å·å†…å¼€å¯ 'i' (å¿½ç•¥å¤§å°å†™)
const regex = /JavaScript (?i:is) Awesome/;

console.log(regex.test("JavaScript is Awesome")); // true
console.log(regex.test("JavaScript IS Awesome")); // true
console.log(regex.test("JAVASCRIPT is Awesome")); // false (å¼€å¤´éƒ¨åˆ†ä»åŒºåˆ†å¤§å°å†™)
```

## 6. RegExp.escape

åœ¨å¤„ç†ç”¨æˆ·è¾“å…¥å¹¶å°†å…¶ä½œä¸ºæ­£åˆ™è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†æ—¶ï¼Œæœ€å¤´ç–¼çš„å°±æ˜¯è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ã€‚`RegExp.escape` æä¾›äº†å®˜æ–¹çš„è§£å†³æ–¹æ¡ˆã€‚

```javascript
const userInput = "Hello. (world)+";

// ä»¥å‰éœ€è¦æ‰‹åŠ¨å†™æ­£åˆ™æ›¿æ¢ï¼šuserInput.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')
// ç°åœ¨ç›´æ¥ä½¿ç”¨å®˜æ–¹æ–¹æ³•
const safePattern = RegExp.escape(userInput);
const regex = new RegExp(`^${safePattern}$`);

console.log(regex.test("Hello. (world)+")); // true
```

## 7. Float16Array

ä¸ºäº†æ»¡è¶³é«˜æ€§èƒ½è®¡ç®—ã€å›¾å½¢å­¦å’Œ AI æ¨¡å‹éƒ¨ç½²çš„éœ€æ±‚ï¼ŒES2025 å¼•å…¥äº† `Float16Array`ã€‚ç›¸æ¯” `Float32Array`ï¼Œå®ƒèƒ½èŠ‚çœä¸€åŠçš„å†…å­˜ç©ºé—´ã€‚

```javascript
const halfFloats = new Float16Array([1.5, 2.5, 3.5]);

console.log(halfFloats.length); // 3
console.log(halfFloats.byteLength); // 6 (æ¯ä¸ªå…ƒç´  2 å­—èŠ‚)
```

## 8. é‡å¤å‘½åæ•è·ç»„ (Duplicate Named Capture Groups)

åœ¨ä»¥å‰ï¼ŒåŒä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ä¸­ä¸å…è®¸å‡ºç°åŒåçš„æ•è·ç»„ã€‚ES2025 å…è®¸åœ¨ä¸åŒçš„åˆ†æ”¯ï¼ˆ`|`ï¼‰ä¸­ä½¿ç”¨ç›¸åŒçš„æ•è·ç»„åç§°ã€‚

```javascript
const regex = /(?<year>\d{4})-\d{2}|\d{2}-(?<year>\d{4})/;

const match1 = "2025-01".match(regex);
console.log(match1.groups.year); // "2025"

const match2 = "01-2026".match(regex);
console.log(match2.groups.year); // "2026"
```

## æ€»ç»“

ES2025 æ˜¯ä¸€ä¸ªæ³¨é‡â€œè¡¥é½çŸ­æ¿â€çš„ç‰ˆæœ¬ã€‚è¿­ä»£å™¨åŠ©æ‰‹å’Œé›†åˆæ–¹æ³•æå¤§åœ°ç®€åŒ–äº†æ—¥å¸¸çš„æ•°æ®å¤„ç†ï¼Œè€Œ **RegExp.escape** å’Œ **Promise.try** è§£å†³äº†é•¿æœŸä»¥æ¥å¼€å‘è€…ä¸å¾—ä¸ä¾èµ–ç¬¬ä¸‰æ–¹åº“æˆ–æ‰‹åŠ¨å®ç°çš„å°ç—›ç‚¹ã€‚

ç›®å‰ï¼Œè¿™äº›ç‰¹æ€§åœ¨ä¸»æµæµè§ˆå™¨ï¼ˆChrome 125+, Firefox 128+, Safari 17.4+ï¼‰ä¸­å·²å¾—åˆ°å¹¿æ³›æ”¯æŒã€‚

**å‚è€ƒæ–‡çŒ®**

[ECMA-262 2025 è§„èŒƒ ğŸ‘‰](https://tc39.es/ecma262/2025/)
